<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.93.3">
<meta name=description content>
<link rel=icon href=/images/favicon.png type=image/png>
<title>08_锁：并发操作中，解决数据同步的四种方法 :: Gen 的学习笔记</title><link href=/css/nucleus.css?1646809632 rel=stylesheet>
<link href=/css/fontawesome-all.min.css?1646809632 rel=stylesheet>
<link href=/css/hybrid.css?1646809632 rel=stylesheet>
<link href=/css/featherlight.min.css?1646809632 rel=stylesheet>
<link href=/css/perfect-scrollbar.min.css?1646809632 rel=stylesheet>
<link href=/css/auto-complete.css?1646809632 rel=stylesheet>
<link href=/css/atom-one-dark-reasonable.css?1646809632 rel=stylesheet>
<link href=/css/theme.css?1646809632 rel=stylesheet>
<link href=/css/tabs.css?1646809632 rel=stylesheet>
<link href=/css/hugo-theme.css?1646809632 rel=stylesheet>
<link href=/css/theme-green.css?1646809632 rel=stylesheet>
<script src=/js/jquery-3.3.1.min.js?1646809632></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/9/8/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href=/><svg id="grav-logo" style="width:100%;height:100%" viewBox="0 0 504 140" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421"><path id="path189" style="fill:#000;stroke-width:.204716" d="m82.052734 5.96875c-.854728.206286-1.398833 1.0426648-2.119991 1.5136522-1.191736.9811717-2.382712 1.9632671-3.575321 2.9433788 2.594183.350428 5.145702.867699 7.545412 1.808313 5.15394 2.088262 10.087847 4.726839 15.416602 6.374822 1.147804.40744 2.285264.842546 3.422754 1.277803 1.75942-1.384373 3.51938-2.768062 5.27734-4.154297-5.15508-1.970902-10.472419-3.533913-15.466989-5.9135627-3.304489-1.4459104-6.569291-3.1504213-10.136525-3.8383905-.121039-.00522-.24197-.024031-.363282-.011719z"/><path id="path450" style="fill:#000;stroke-width:.204716" d="m196.30273 32.138672c-1.55372 1.106817-3.11032 2.209608-4.66406 3.316406 4.11763 4.405283 7.13993 9.726972 9.45954 15.262663 1.56282 4.287959 2.2182 8.808703 2.86451 13.292499.38887 3.231143.62551 6.590222.0466 9.712715-.96049 4.643178-2.51468 9.199787-4.84902 13.336481-1.78789 2.835013-4.77216 5.01731-8.11326 5.529767-2.16053.194334-4.25815-1.330295-4.80458-3.419166-.29054-.914485-.51906-1.850946-.67999-2.79699 2.1261-1.148168 4.25191-2.296867 6.37891-3.443359.78567-2.636208 1.75001-5.564844.60547-8.248047-.53525-1.298746-2.07776-1.892115-3.39901-1.607978-1.67519.02941-3.3829.406643-4.74129 1.430853-2.09614 1.168313-4.10099 2.916619-4.64291 5.358765-.73735 2.904669-.11138 5.915639.29727 8.820042.49411 2.882218 1.53935 5.996824 4.13517 7.643151 2.35305 1.561098 5.48511 1.763546 8.04109.579307 3.30354-1.331591 6.21912-3.456703 8.96703-5.688008 1.96663-1.643363 3.42478-3.806368 4.42597-6.15213 2.06828-4.393527 3.59057-9.083525 4.21247-13.907794.54472-5.741127-.61574-11.455157-1.66588-17.071718-.80064-3.920321-2.18078-7.71884-4.16423-11.197019-2.05596-3.912809-4.48616-7.631847-7.30162-11.041456-.13607.097-.27214.194011-.40821.291016zm-8.92578 46.195312c.2043 1.815935-.60122 3.548925-1.07929 5.263081-.26336.819832-.52694 1.639598-.78985 2.459576-.30945-2.140868-.59564-4.349894-.22997-6.496983.18103-.524926.30215-1.38075 1.03046-1.299978.29126.03359 1.0366-.341949 1.06865.0743z"/><path id="path452" style="fill:#000;stroke-width:.204716" d="m194.86719 31.490234c-1.70711 1.334537-3.41328 2.670271-5.1211 4.003907 2.86943.883205 5.775 2.063806 7.95683 4.093286 4.34216 3.834897 7.82362 8.740548 9.94201 14.191942 1.76448 4.476901 2.8312 9.131581 3.98461 13.784118.98733 4.367667 1.90544 8.806141 3.88594 12.856576 1.24292 2.622586 2.70301 5.245971 5.0027 7.092602 2.86039 2.399492 6.23621 4.055842 9.38886 6.021597 2.04982 1.173006 4.12056 2.42864 6.39784 3.079398 1.45651.10626 2.44267-1.215991 3.58737-1.828292.94383-.603205 1.48969-1.756053 1.1938-2.859996-.26262-3.334359-1.79835-6.420037-2.55184-9.603237-1.082-3.641846-2.12776-7.319367-2.61203-11.103361-1.00164-5.999038-1.25683-12.026556-1.07049-18.099458.15781-3.468309.76516-7.086829 1.79952-10.394254.64699-1.974316 1.63337-3.824169 2.48746-5.7485 1.81963 1.486138 2.86594 3.671816 3.9004 5.728955.64108 1.500012.97375 3.161278.76757 4.790577-.65333-.253181-1.39605-.122429-1.84271.440021-1.42475 1.127514-2.85059 2.25365-4.27448 3.382244 1.88905.912209 4.07218 1.774111 6.16993 1.046875 1.41721-.500184 2.61209-1.460186 3.82031-2.322265 1.61109-1.433166 2.12717-3.722659 1.84286-5.796283-.25541-3.407249-2.01838-6.471843-3.90241-9.234739-1.20503-1.564932-2.69095-3.179269-4.68989-3.629264-2.29359-.240154-4.23277 1.369272-5.7447 2.892708-1.43661 2.020458-2.19043 4.395461-3.26252 6.599693-1.49815 3.623296-2.20417 7.528274-2.57907 11.414395-.28341 3.951365-.19329 7.924341.002 11.877608.33001 4.919807.95661 9.833736 2.05577 14.642753.86678 3.567725 1.99782 7.062219 3.05361 10.576879-3.15033-1.782655-6.31477-3.575686-9.24095-5.712379-2.79226-2.230651-4.33102-5.569215-5.59547-8.821527-1.43467-3.856976-2.08138-7.93959-3.1517-11.901307-1.2033-4.621024-2.39596-9.284022-4.32968-13.665113-2.65871-5.844039-6.70058-11.067953-11.71736-15.073502-1.61991-1.219808-3.40929-2.21157-5.31445-2.910157-.0794.0625-.15886.125-.23828.1875z"/><path id="path454" style="fill:#000;stroke-width:.204716" d="m254.32422 60.896484c-2.83006.191036-5.03358 2.200857-7.25961 3.693573-2.47583 1.745762-4.35875 4.322203-5.13274 7.262544-.87682 3.10457-.8925 6.386041-.66333 9.580213.28103 2.760325 1.40168 5.413874 3.21193 7.520311 1.70594 2.226415 3.96523 4.02624 6.58223 5.060539 1.96205.825143 4.24546 1.477142 6.30644.60157.53052-.223408-.579.488221-.79955.696267-3.55669 2.717013-6.96075 5.643309-10.03806 8.898339-3.00732 3.02489-5.58812 6.54712-7.09012 10.56555-1.52988 3.64022-2.18897 7.75831-1.16537 11.62585 1.1817 4.89934 4.89376 9.02479 9.55065 10.89607 3.31904 1.41685 6.8989 2.15208 10.47421 2.53862 1.33062.14817 2.74633-.0804 3.79142-.97127 1.26107-.73033 2.85276-1.49217 3.09455-3.10504.98221-4.40417.4144-8.94054.57187-13.40766.0559-9.78704-.13373-19.58303.15814-29.363921.22294-.322518.70593-.47792.98565-.786323 3.15772-2.482196 6.24325-5.094621 9.44181-7.481219.59962-.562387 1.37371-1.333493 1.12122-2.214688-.58838-1.019752-1.9005-.72381-2.80832-.393333-1.78507.665067-3.47142 1.597264-4.9082 2.856236-1.27226.954663-2.48458 2.004466-3.71388 2.992226.0582-1.808273-.2238-3.702052.46966-5.419967 1.29511-4.12273 1.38265-8.583115.37497-12.777365-.40543-2.092479-.5444-4.224875-.57901-6.349544-.12138-1.041696-1.27545-1.792292-2.25563-1.339589-.44131.07748-.73882.621708-1.12056.653678-2.66594-1.25476-5.64308-1.684906-8.56131-1.835573zm.33203 5.285157c2.01725.246306 4.08801.70676 5.74023 1.958984.49385-.198426.10745 1.069897.2356 1.480834.0141 5.004454.0397 10.022836-.26491 15.015164-.54725 1.610021-1.37948 3.119937-2.27537 4.560643-.29357.413619-.64502.972024-1.23854.753886-2.97677-.555212-5.7871-2.226129-7.55638-4.708964-1.73668-1.945495-2.4821-4.544038-2.47151-7.147851-.0102-2.492946.0306-4.99488.91085-7.343489.73261-1.875515 1.96563-3.730677 3.8265-4.614744 1.01134-.351459 2.06471-.0229 3.09353.04554zm5.48437 34.769529c-.0724 10.74931.0496 21.50087-.0827 32.24888-.0316.50518-.0784 1.00973-.14971 1.51089-3.6299-.36444-7.17132-1.2816-10.41387-2.97137-3.31505-1.88151-5.62981-5.38503-6.00686-9.18451-.34732-2.69647.25495-5.42026 1.34629-7.88372 1.31942-3.35117 3.42797-6.40619 5.95909-8.88755 2.88063-3.07638 6.02153-5.910197 9.37903-8.457618-.0104 1.208333-.0208 2.416667-.0313 3.624998z"/><path id="path456" style="fill:#000;stroke-width:.204716" d="m286.45117 62.744141c-.66276.0108-1.0893.579612-1.58984.919921-2.93216-.416883-6.1457-.03654-8.52713 1.859521-1.32775.839426-2.71795 1.775792-3.34291 3.285064-1.96619 3.59837-2.81372 7.799977-2.48463 11.879219.58618 4.391569 3.77417 8.360576 8.02068 9.714478 3.09823 1.057475 6.42957 1.208399 9.67383 1.054687 2.00132-.177732 3.83824-1.164999 5.41409-2.288612 1.93792-1.221245 3.80495-2.745567 4.75664-4.887712 1.27631-2.582436 2.06687-5.395576 2.51547-8.233505.29359-2.654253-1.0275-5.228394-2.7852-7.132573-2.12288-2.207611-4.88968-3.643737-7.64514-4.897051-1.24663-.488298-2.51233-.998051-3.82059-1.270293-.0615.0067-.12392-.01566-.18527-.0031zm-.76172 5.544921c1.33874.466153 2.72682 1.108914 3.99146 1.820734 2.3343 1.241606 4.77095 2.977239 5.44214 5.689032.34285 2.011522-.5266 3.97606-1.06266 5.878051-.57623 1.593021-1.21802 3.351886-2.6703 4.347853-1.85437.702929-3.8863.346015-5.81627.291151-2.9267-.216886-6.09721-1.13898-7.8626-3.659801-1.58319-2.125298-1.94862-4.931501-1.41712-7.483183.34601-2.202505.95334-4.411407 2.16488-6.305711 1.72955-.549238 3.55003-.159042 5.2991.01258.58196.0145 1.07248-.33425 1.44114-.750866.16341.05339.32682.106771.49023.160156z"/><path id="path458" style="fill:#000;stroke-width:.204716" d="m312.22656 63.080078c-2.51287-.06687-4.65817 1.475076-6.57812 2.91211-2.04617 1.597902-3.36366 3.956301-3.96106 6.457589-.69758 2.785863-.78555 5.72098-.38894 8.557054.45501 2.562579 1.62143 5.141346 3.83069 6.648159 2.22165 1.784303 4.86213 3.031589 7.67199 3.533149 3.55108.707794 7.20025.635324 10.80301.591013 2.16637-.158142 4.39539-.452498 6.36267-1.410011 2.07587-1.747288 3.95151-3.712247 5.70312-5.78125-2.79921.445598-5.49844 1.330936-8.26339 1.923705-3.39336.425307-6.83433.249648-10.23012-.04257-3.24745-.407049-6.52917-1.646109-8.82841-4.041056-.87222-1.044913-1.21587-2.282305-1.45637-3.562052-.26964-2.262109-.13957-4.588823.36966-6.808958.33731-1.374369.93104-2.721367 1.91644-3.756179 2.37937-.429241 4.84399.104078 7.07813.939453 1.11063.442475 2.11782 1.117109 2.96875 1.955078 1.69271-1.222252 3.38676-2.442646 5.08008-3.664062-2.66632-2.652709-6.35737-4.016762-10.05096-4.376845-.67268-.08546-1.35003-.09118-2.02717-.07433z"/><path id="path460" style="fill:#000;stroke-width:.204716" d="m286.07422 99.496094c-1.07934-.0024-1.82247.939246-2.52539 1.519526-.851.70779-1.76177 1.34363-2.75 1.84571.10409 1.4247 1.00637 2.71545 2.30403 3.3049 1.0993.9205 2.58927 1.76482 4.04753 1.17752 1.90839-.57603 3.60529-2.60159 3.03127-4.66604-.24239-1.55382-1.36304-3.209315-3.09377-3.187476-.33817.0088-.67622-.02649-1.01367.0059z"/><path id="path464" style="fill:#000;stroke-width:.204716" d="m371.67188 20.626953c-3.87604 1.944717-7.75613 3.888659-11.47852 6.119141 1.10416-.0044 2.20833-.0089 3.3125-.01172-2.12786 4.917471-2.2546 10.388689-2.12305 15.660156.35129 5.01355 2.02586 9.810998 3.70363 14.509646 1.38866 3.777132 2.7827 7.452227 3.66164 11.3659.85336 3.402855 1.29928 6.910206 1.308 10.447135.0802 4.183874.21652 8.436832-.61619 12.533292-.82952 4.256594-2.10342 8.496467-4.44794 12.181686-1.27591 2.17814-2.95847 4.09056-4.92893 5.66614-1.4947 1.30394-3.28466 2.42294-5.1431 2.96612-2.39632.75818-4.8139.92992-7.31504.96576-1.38398-.001-2.76732-.6657-3.42811-1.91942-1.17952-1.92247-1.43828-4.29667-1.23452-6.50088-.072-.59683.49407-.45599.8906-.49906.4488-.0105 1.13089-.11797 1.17301.51024.41153 1.70485.26658 3.48863.31896 5.23047 71e-5.68229.002 1.36459.003 2.04688 1.90405-1.12478 3.80883-2.24831 5.7129-3.37305-.13258-2.7825.25622-5.8613-1.42774-8.28125-.9124-1.199373-2.54906-1.368673-3.94062-1.215946-1.58257-.05091-3.231.243516-4.50269 1.241586-2.01363 1.04845-3.69566 2.97113-3.89001 5.30511-.35901 2.56593.15031 5.20715 1.10217 7.59326 1.08182 2.48207 3.33319 4.66552 6.14699 4.84641 2.41571.25391 4.83773-.17138 7.23065-.45987 3.43975-.6249 6.46732-2.49346 9.27287-4.49033 3.70335-2.48113 7.17849-5.51773 9.32948-9.48525 2.76734-4.614072 4.23626-9.901741 4.96799-15.199902.5525-4.277499.36306-8.601147.27024-12.900272-.10538-3.360412-.59916-6.701988-1.5034-9.941147-1.01323-4.310005-2.61015-8.445066-4.11035-12.599558-1.15953-3.383432-2.2477-6.765931-2.76717-10.283458-.33024-3.191741-.23107-6.55122.089-9.779123.36915-3.275313 1.43804-6.518457 3.45986-9.153927.90985-1.339577 1.8197-2.679149 2.72974-4.018598-.60873.307943-1.21745.615885-1.82617.923828z"/><path id="path466" style="fill:#000;stroke-width:.204716" d="m378.41211 36.992188c-2.95498.280324-5.86099.959554-8.72191 1.726685-3.48706 1.125695-6.68165 3.068917-9.47059 5.423031-2.56647 2.52845-3.92486 5.941757-5.55982 9.083275-.82608 1.721803-1.65239 3.443491-2.47815 5.165446 2.4334-1.275762 4.86732-2.550527 7.30078-3.826172 1.48474-3.078592 2.82421-6.267576 5.04492-8.919922.37009-.484192 1.06101-.352533 1.4769-.805542.96403-.824462 2.26732-1.015047 3.43718-1.415431 2.16001-.556031 4.36494-1.020535 6.56444-1.321996 1.63608-.05267 2.81813 1.277896 3.61272 2.548816 1.61011 2.517063 2.53967 5.509476 2.17683 8.471365-.15926.806383-.30463 1.757669-.91027 2.335911-1.23529.812349-2.5271 1.570455-3.64881 2.53258-1.05465 1.010852-1.29014 2.99378.005 3.90959 1.10397.771221 2.48005.146732 3.46359-.520192 1.29018-.710688 2.43727-1.673469 3.63473-2.496494 3.70686-.791836 7.53625-.861897 11.30656-.662435 1.77784.291901 3.18039 1.611104 4.02392 3.142913 2.57898 3.825958 4.24413 8.148004 4.98248 12.705642.67022 3.616411 1.12179 7.379282.74216 11.014872-.34106 1.748258-.84725 3.691605-1.96926 5.175636-.96893.649595-2.1745.835524-3.28802 1.122337-2.6009.548228-5.39227.396336-7.7976-.803806-2.77349-1.192048-5.22531-3.0329-7.28016-5.233016-.3945-.779099-.90346-.07995-1.38135.226711-1.35242.977451-2.70594 1.953363-4.05756 2.931914 2.24054 2.398724 4.74359 4.601413 7.68825 6.093768 3.25183 1.841965 7.13161 2.665009 10.82624 1.922007 3.6294-.612513 7.11555-2.286566 9.77115-4.844758 1.96335-2.122487 2.68295-5.045637 3.19814-7.807952.3987-5.091629-.44666-10.18885-1.56074-15.141305-1.05935-4.233613-3.02767-8.207304-5.51137-11.780005-1.25317-1.797572-3.09833-3.242237-5.29091-3.639442-2.34828-.50242-4.76173-.155362-7.13833-.149969-1.48293.0791-2.96525.208398-4.43164.447266 1.1072-4.302368-.25828-8.87208-2.60303-12.520248-1.37932-2.074659-3.51292-4.084833-6.15674-4.09108z"/><path id="path468" style="fill:#000;stroke-width:.204716" d="m423.28906 62.134766c-1.63995.97054-3.28033 1.94036-4.92187 2.908203-.005 4.860224-.0554 9.74159.63518 14.564078.26451 3.642161-.0516 7.367269.98576 10.916826.42202 1.528949.57544 3.428854 2.02945 4.374565 1.67804 1.119853 3.85376.452608 5.42395-.533389 2.15482-1.410381 4.32474-2.885565 5.95208-4.915798 1.06489-1.237277 1.93975-2.619085 2.8603-3.962923-2.69521.780684-5.50568 1.495949-7.83152 3.126296-.73545.615066-1.29977 1.758673-2.3345 1.799485-.65265-2.346208-1.1458-4.764948-1.22309-7.213103-.001-3.183751-.28693-6.355244-.63761-9.516081-.28356-3.960842-.13171-8.020399-.13344-12.024722-.26823.158854-.53646.317708-.80469.476563z"/><path id="path470" style="fill:#000;stroke-width:.204716" d="m421.32422 50.556641c-1.07185.409354-1.82089 1.344889-2.78081 1.947169-.73001.555316-1.46029 1.110263-2.18989 1.666112 1.19469.615669 2.29216 1.471247 3.61328 1.802734-.0189 1.007812-.038 2.015621-.0566 3.023438 1.91341-1.124993 3.82781-2.248329 5.74023-3.375.0396-1.199558-.0142-2.413731.24219-3.587891-.0222-1.061754-1.27193-1.818341-2.21354-1.303916-.4361.07207-.95475.446837-1.31358.0097-.30768-.168724-.69727-.282971-1.04124-.182359z"/><path id="path474" style="fill:#000;stroke-width:.204716" d="m478.08398 8.6914062c-3.04434.14731-5.7197 1.8438508-8.10248 3.6007978-1.72765 1.357081-2.97442 3.250966-3.63815 5.337598-2.26887 6.050536-2.21342 12.612826-2.40727 18.981009-.15743 8.550261.61576 17.100356 1.57762 25.572923.191 1.852456.35825 3.707256.52146 5.56236-2.14353 4.328099-4.51967 8.591659-7.70401 12.250805-2.36409 2.930614-4.6741 5.893283-7.25693 8.60857-1.23948.310478-2.55965.07497-3.80664-.115235-2.07257-.364678-3.86782-1.59835-5.23261-3.16249-1.81027-2.033779-3.15103-4.509976-3.85346-7.138711-.58177-3.373649.71016-6.7518 2.34552-9.649041.48255-.732833.88067-1.621841 1.6468-2.092726 2.34007-.143427 4.64989.535834 6.77539 1.46875.99634-.283035 1.63883-1.177063 2.49285-1.713624.99586-.778422 1.99114-1.557572 2.98762-2.335204-3.46085-1.340304-7.09892-2.967477-10.89987-2.427405-2.11783.508015-3.79571 2.000439-5.52392 3.235425-2.68145 2.341808-4.00679 5.78142-5.09379 9.076745-.89502 3.13538-.75704 6.605691.71513 9.548105 1.7092 3.847785 4.41928 7.489981 8.28686 9.356697 2.33088 1.021718 4.95868 1.325034 7.47457 1.052229 2.3056-.511534 4.29585-1.953137 6.00586-3.52539 2.54674-2.587205 4.77423-5.461403 7.04935-8.278252 1.52223-1.934278 3.11838-3.823289 4.42135-5.917061.59397 4.795158.8271 9.581025.6875 14.417969.0867 1.188555-.17941 2.681701.89258 3.509766.8519.734443 2.1919.630446 2.95133-.187286.77818-.629943 1.39784-1.430245 2.18539-2.050996.33463-4.101681.12961-8.221072.17483-12.330182-.0958-2.588148-.18458-5.17999-.3428-7.763568-.3245-1.63234-.58546-3.442123.28436-4.958718.51754-.816296 1.63351-.855617 2.47541-1.136985 1.29347-.223993 2.66956-.428758 3.95583-.11448 1.70322.767865 2.36308 2.681045 3.25511 4.18284 2.45359 5.01299 2.5034 10.662947 3.45117 16.066406.39453 1.998924.93975 4.059017 2.15761 5.723926 1.20516 1.352908 3.27678 1.341194 4.82481.637402 4.38174-1.593728 8.19236-4.35232 12.07422-6.859375 1.31644-.900078 2.96011-1.738505 3.51562-3.339844.18957-1.049313-1.14649-1.612884-1.96679-1.169922-.35611.233689-.66171.381595-1.10399.363009-2.26559.572321-3.99719 2.262336-6.02241 3.343699-2.07882 1.256166-4.16238 2.484729-6.55915 3.076496-.54459-.626324-.63649-1.53044-.94141-2.28711-.9522-3.598937-.99491-7.326699-1.76776-10.965895-.59128-3.450187-1.70586-6.83908-3.59788-9.802482-1.17173-2.100903-3.12486-4.124232-5.67959-4.213301-1.78692-.04961-3.60589.110612-5.3292.60205-.7058.211269-1.39123.486775-2.05525.805409 3.21714-7.057532 5.53801-14.470846 8.14459-21.764942 1.39013-3.996916 2.6535-8.095743 2.86422-12.350426.27986-3.961867.2851-7.946035.11578-11.911498-.22997-2.048169-.57126-4.334547-2.12459-5.8286024-1.48757-1.1781658-3.52717-.9718637-5.30079-.9902344zm-1.34765 5.0468748c.75756.100169 1.59662-.102993 2.29883.236328 1.20912 2.467702.83156 5.298741.93641 7.954687.0175 5.110463-.15302 10.311699-1.90356 15.185035-2.1116 6.637828-4.48624 13.179085-6.98769 19.684909-.22521.70112-.41136 1.033956-.41626.0992-.7906-7.151956-1.36504-14.321603-1.13549-21.539947.1018-5.837394.16128-11.671654 2.02378-17.234781.55964-1.515727 1.23048-3.250281 2.74843-4.035819.79358-.213639 1.61188-.339885 2.43555-.34961zm-4.6543 76.720703c.62866.420068-.45727 1.13443-.58012.305527-.23418-.244089.43497-.422407.58012-.305527z"/><path id="path476" style="fill:#000;stroke-width:.204716" d="m444.84375 25.214844c-1.64773.385233-3.25602 1.067363-4.67561 1.987852-2.04086 1.6493-3.49412 3.884237-5.29746 5.771289-2.66063 2.970824-5.68987 5.575842-8.77289 8.092454-.58007.602259-1.39502 1.328599-1.25795 2.242155.25323.910636 1.38471.929547 2.11011.630268 1.39615-.334178 2.69141-1.03155 3.91085-1.761623 4.12198-3.246933 7.92443-6.902681 11.24802-10.966954 1.09459-1.394037 2.48316-2.522459 3.55811-3.926379.59161-.629078.42113-1.908335-.5224-2.035859-.10001-.0081-.19903-.06601-.30078-.0332z"/><path id="path510" style="fill:#000;stroke:#000;stroke-width:.0832446" d="m156.66797 65.568359c-1.40281.04819-2.00876 2.164215-.79102 2.908203 1.10643.978518 2.94358-.355474 2.51367-1.714843-.18241-.751321-.9599-1.271376-1.72265-1.19336z"/><path id="path512" style="fill:#000;stroke:#000;stroke-width:.0832446" d="m156.66797 65.568359c-1.40281.04819-2.00876 2.164215-.79102 2.908203 1.10643.978518 2.94358-.355474 2.51367-1.714843-.18241-.751321-.9599-1.271376-1.72265-1.19336z"/><path id="path1432" style="fill:#000;stroke-width:.202157" d="m94.878906 30.269531c-2.287631.898028-4.703901 1.605195-6.807724 2.877579-4.485024 5.491989-6.611133 12.401509-8.442948 19.132856-1.605329 6.046121-2.840557 12.204453-4.985613 18.095796-2.771657 8.014773-6.035967 15.844748-10.868943 22.859542-1.749947 2.479612-3.601343 4.885482-5.392819 7.335006 2.85849-1.26468 5.716446-2.530574 8.574219-3.796872 6.610002-8.720957 10.691919-19.019319 14.096589-29.330787 2.790753-8.7136 4.127071-17.89265 7.79901-26.319883 1.235636-2.821633 2.900303-5.441874 4.898209-7.783699.952846-1.237371 1.905694-2.474742 2.858536-3.712116-.576172.214193-1.152344.428386-1.728516.642578z"/><path id="path1434" style="fill:#000;stroke-width:.202157" d="m93.257812 30.740234c-1.733368.858571-3.440196 1.845878-5.164062 2.751954.810252 5.34993 3.024219 10.347909 4.425405 15.521466 2.072478 6.784453 3.847313 13.681516 5.505429 20.598588 1.180239 4.908903 1.729165 9.94751 2.987136 14.836977.96649 3.670046 2.49394 7.275685 4.9564 10.198384.78807.844102 1.64803 1.682248 2.67836 2.213725.88334.191728 1.43837-.72189 2.17288-1.03501 1.14091-.744883 2.2825-1.48873 3.42283-2.234521-1.77857-1.19183-3.63718-2.460542-4.64263-4.417814-3.0829-4.597975-3.70366-10.234336-4.77902-15.52966-.8585-4.588927-2.03141-9.108024-3.16222-13.634617-.51284-2.223885-1.15403-4.419896-1.735477-6.627752-1.569505-5.662739-3.34325-11.323358-5.050111-16.90562-.517229-1.710922-.87143-3.482123-.92156-5.26735-.0439-.278108-.408679-.604452-.69336-.46875zm7.623048 27.275391c-.2376.743408-1.454441-.29859-.48492-.165475.15225.06679.66504-.188859.48492.165475z"/><path id="path1440" style="fill:#000;stroke-width:.202157" d="m93.693359 58.945312c-4.070097.13705-8.123695.652337-12.201562.568416-3.492748.01042-6.98542-.0175-10.478125-.02935-2.241288 1.678066-4.483664 3.354679-6.72461 5.033203 6.767011-.175815 13.540661.04814 20.304958-.196194 5.878883-.507678 11.806803-.677339 17.69857-.02042 1.78153.149956 3.55694.456984 5.32078.675666 1.05621-.117502 1.71027-1.096398 2.59049-1.591397 1.38565-1.016663 2.77006-2.035027 4.15747-3.049296-3.12468-.07048-6.17775-.620639-9.27187-.956016-3.16628-.218965-6.328998-.549518-9.507395-.458409-.629656-.01131-1.259141.01642-1.888706.0238z"/><path id="path1442" style="fill:#000;stroke-width:.202157" d="m137.80273 32.195312c-.71131-.02645-1.22365.533659-1.76757.896485-3.32296-.648355-6.5358.949258-9.31521 2.591857-4.13708 2.423361-8.39589 5.160194-10.8685 9.405801-2.81817 4.65217-3.70379 10.122397-4.38312 15.431557-.71678 4.62043-.63171 9.312129-.6621 13.974246-.17073 3.941542 1.22301 7.714025 2.78316 11.263402 1.47756 3.374971 2.98687 6.93403 5.78974 9.440876 2.60206 2.103977 5.98229 2.938743 9.26997 3.079382 3.01616.178255 6.04839.197489 9.0654.05924 3.25526-.352297 6.13656-2.210964 8.52083-4.353872 1.9125-1.802379 3.23536-4.122029 4.467-6.415823 1.96654-3.819715 2.97141-8.06343 3.32178-12.327816.63197-6.298061.53467-12.640058.51157-18.961602-.31286-6.555578-3.34059-12.6311-7.00772-17.94516-1.36398-2.116257-3.08084-4.117768-5.41961-5.176398-1.33498-.643965-2.82253-.990471-4.30562-.962179zm.92969 5.699219c2.47608 1.49523 3.89223 4.131017 5.42803 6.481762 2.3619 3.875065 4.21223 8.273459 4.57393 12.778004.10946 3.540014.0754 7.199129.0226 10.786117-.13267 4.59801-.30727 9.207498-1.382 13.719742-.93846 3.818379-2.73823 7.354917-5.25828 10.371228-.54974.799923-1.41776 1.322856-2.39992 1.343616-2.75225.198886-5.52039.102639-8.2763.011-2.77568-.07296-5.73025-.633233-7.86708-2.529377-2.10928-2.179327-3.28872-5.047642-4.51317-7.774861-1.11282-2.692425-2.33357-5.39614-2.44851-8.361666-.14085-3.190521-.0674-6.390597.0562-9.581427.14975-3.270265.65943-6.610104 1.17386-9.878406.69163-3.869378 1.85813-7.786775 4.2574-10.998784 1.95471-2.475077 4.54847-4.446958 7.40796-5.758508 1.93693-.843915 4.24175-.844849 6.06259.206969.44889.199604.90067.715415 1.31312.18647.57632-.317847 1.12482-.8901 1.71804-1.053332l.0931.03644z"/><path id="path2471" style="fill:#000;stroke-width:.202157" d="m19.875-1.1464844c-2.467326.20038379-4.416995 1.8977635-6.465485 3.1000412-2.092157 1.6351412-3.347691 4.0900298-4.3407045 6.4976497-1.162515 3.0913185-1.9649042 6.3534035-2.1332636 9.6581685-.020817 3.848753 1.14656 7.564265 2.0214843 11.275391.9423091 3.535474 1.9990858 7.038851 3.0273438 10.550781-3.558475 2.085762-7.2987095 4.432847-9.2179466 8.23808-1.91058832 3.644811-3.22225643 7.686999-3.32760678 11.823119.0280441 1.872592 1.03030634 3.785445 2.80262948 4.546582 2.8585542 1.517064 6.1649538 1.732272 9.3167369 2.130179 2.211118.216219 4.432631.329845 6.654703.314774.344948 5.553728.702102 11.179714-.130052 16.708708-.113818.436681-.01061 1.276409-.671293.840427-3.346086-.889374-7.010389-.937983-10.2533429.368834-1.4220886.706309-2.8423797 1.439918-4.1587002 2.330061-1.4833855 1.011485-2.50642305 2.816075-2.15738584 4.639764.27670544 1.50483.83204454 2.946746 1.31812824 4.392702 1.0029707 2.447538 2.6634652 4.859863 5.174811 5.915053 1.664462.60635 3.4565307-.0423 4.8542497-.98599 2.199044-1.234 4.187541-2.882528 5.579001-5.004834 1.075465-1.478272 2.02244-3.044267 2.962162-4.610975 3.73972 1.912958 7.639363 3.750579 11.866027 4.220964 5.229014.819247 10.534141 1.238137 15.827896 1.103707 4.609822-.188519 9.320543-1.100025 13.28447-3.57145 2.628989-1.435801 5.127933-3.288571 6.707934-5.886007 2.551407-3.93756 3.549201-8.680994 3.793283-13.30966.08651-4.065033-.232752-8.209911-1.679065-12.044616-1.683663-4.622633-4.346852-8.915431-7.956449-12.282379-4.78356-4.628438-10.902243-7.535639-17.076681-9.825795-7.576235-2.890711-15.799324-3.887274-23.870477-3.415234-1.45148.184805-2.908547.38467-4.31686.793673-1.772122-6.15093-3.742629-12.328265-4.585432-18.662232-.243926-3.049717.472069-6.06426 1.365298-8.9933226.743461-2.0621443 1.62728-4.2323716 3.323377-5.6960226.804625-.5857958 1.775496.026879 2.575239.3129153.608663.2214678 1.178371.9384883.681754 1.546329-.687235 1.1336659-1.997566 1.6924602-2.676648 2.8375411-.420302.6993466-1.297068 1.3490728-.984369 2.2680738.448857.947951 1.697752.638275 2.485067.36589 1.793577-.782484 3.519119-1.7891435 5.009073-3.0651091 1.372296-1.2711291 2.618085-3.140637 2.133059-5.0953206-.549199-2.41423932-3.002514-3.84881267-5.297121-4.2288982-.484264-.078-.974257-.1160508-1.464844-.1015625zm2.066406 42.4824224c5.853967-.03158 11.785551.546324 17.387283 2.30404 4.052566 1.30083 8.026984 2.903842 11.762369 4.951333 5.171419 2.854776 9.830438 7.20005 12.475348 12.525877 1.234364 2.513606 2.149442 5.042218 2.600007 7.830174.348285 2.619998.47256 5.234756.24345 7.882353-.425086 3.919758-1.452478 7.980039-4.029004 11.066769-.637384.750619-1.422851 1.348609-2.123047 2.027344-3.417276 1.602835-7.25638 2.104568-11.001905 2.182687-4.985171.02644-9.943714-.403025-14.861623-1.232555-3.16245-.549877-6.092862-1.904429-8.944116-3.320687-.838298-.398379-1.679269-.793986-2.540012-1.141164 1.812739-5.97312 1.288897-12.293939 1.067125-18.439473.08478-.454615-.401074-1.38791.322921-1.299128 3.346957-.366107 6.725447-.875339 9.86123-2.155826 2.572518-.853242 5.295532-1.091423 7.965567-1.478959.642141-.03087 1.250964-.146033 1.697525-.648911 2.229063-1.713274 4.457918-3.426817 6.687195-5.139812-4.945597.703564-9.950537 1.113255-14.814788 2.283884-1.61454.601637-3.200266 1.331198-4.929937 1.532373-2.392654.476772-4.818149.835899-7.265041.964993-.635149-6.333213-1.951949-12.621946-4.230469-18.576172-.181271-.560347-.446635-1.227831-.632812-1.841797 1.092247-.174855 2.197184-.257762 3.302734-.277343zm-8.710937 2.630859c1.73383 4.920162 3.416007 9.901736 4.097298 15.096077.154901 1.011684.293383 2.025855.410514 3.042595-3.639733-.157396-7.270674-.462804-10.7617185-1.548828-.916187-.285016-1.9318113-.99391-1.7441406-2.091797.067658-2.619841.815338-5.182345 1.7460937-7.615235 1.0452584-2.582819 2.7582053-5.072404 5.2017964-6.593561.355667-.148591.965967-1.118661 1.0366-.331886zM11.498047 88.84375c1.581425.113622 3.132072.488669 4.638672.970703-1.320122 2.612878-3.004131 5.040366-4.855469 7.300781-.497488.672024-1.249391-.0561-1.6745127-.424631-1.8941345-1.83007-2.544719-4.510543-3.0598623-6.995291.5756926-.538238 1.4988482-.576207 2.2554181-.731905.8912275-.117794 1.7976289-.18021 2.6957539-.119657z"/></svg>
</a>
</div><div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div><script type=text/javascript src=/js/lunr.min.js?1646809632></script>
<script type=text/javascript src=/js/auto-complete.js?1646809632></script>
<script type=text/javascript>var baseurl="https://artisanbox.github.io"</script>
<script type=text/javascript src=/js/search.js?1646809632></script>
</div><section id=homelinks>
<ul>
<li>
<a class=padding href=/><i class="fas fa-home"></i> Gen 的学习笔记</a>
</li></ul></section><div class=highlightable>
<ul class=topics>
<li data-nav-id=/8/ title="MySQL 必知必会" class=dd-item>
<a href=/8/>
MySQL 必知必会
</a>
<ul>
<li data-nav-id=/8/1/ title=01_存储：一个完整的数据存储过程是怎样的？ class=dd-item>
<a href=/8/1/>
01_存储：一个完整的数据存储过程是怎样的？
</a>
</li><li data-nav-id=/8/2/ title=02_字段：这么多字段类型，该怎么定义？ class=dd-item>
<a href=/8/2/>
02_字段：这么多字段类型，该怎么定义？
</a>
</li><li data-nav-id=/8/3/ title=03_表：怎么创建和修改数据表？ class=dd-item>
<a href=/8/3/>
03_表：怎么创建和修改数据表？
</a>
</li><li data-nav-id=/8/4/ title=04_增删改查：如何操作表中的数据？ class=dd-item>
<a href=/8/4/>
04_增删改查：如何操作表中的数据？
</a>
</li><li data-nav-id=/8/5/ title=05_主键：如何正确设置主键？ class=dd-item>
<a href=/8/5/>
05_主键：如何正确设置主键？
</a>
</li><li data-nav-id=/8/6/ title=06_外键和连接：如何做关联查询？ class=dd-item>
<a href=/8/6/>
06_外键和连接：如何做关联查询？
</a>
</li><li data-nav-id=/8/7/ title=07_条件语句：WHERE与HAVING有什么不同 class=dd-item>
<a href=/8/7/>
07_条件语句：WHERE与HAVING有什么不同
</a>
</li><li data-nav-id=/8/8/ title=08_聚合函数：怎么高效地进行分组统计？ class=dd-item>
<a href=/8/8/>
08_聚合函数：怎么高效地进行分组统计？
</a>
</li><li data-nav-id=/8/9/ title=09_时间函数：时间类数据，MySQL是怎么处理的？ class=dd-item>
<a href=/8/9/>
09_时间函数：时间类数据，MySQL是怎么处理的？
</a>
</li><li data-nav-id=/8/10/ title=10_如何进行数学计算、字符串处理和条件判断？ class=dd-item>
<a href=/8/10/>
10_如何进行数学计算、字符串处理和条件判断？
</a>
</li><li data-nav-id=/8/11/ title=11_索引：怎么提高查询的速度？ class=dd-item>
<a href=/8/11/>
11_索引：怎么提高查询的速度？
</a>
</li><li data-nav-id=/8/12/ title=12_事务：怎么确保关联操作正确执行？ class=dd-item>
<a href=/8/12/>
12_事务：怎么确保关联操作正确执行？
</a>
</li><li data-nav-id=/8/13/ title=13_临时表：复杂查询，如何保存中间结果？ class=dd-item>
<a href=/8/13/>
13_临时表：复杂查询，如何保存中间结果？
</a>
</li><li data-nav-id=/8/14/ title=14_视图：如何简化查询？ class=dd-item>
<a href=/8/14/>
14_视图：如何简化查询？
</a>
</li><li data-nav-id=/8/15/ title=15_存储过程：如何提高程序的性能和安全性？ class=dd-item>
<a href=/8/15/>
15_存储过程：如何提高程序的性能和安全性？
</a>
</li><li data-nav-id=/8/16/ title=16_游标：对于数据集中的记录，该怎么逐条处理？ class=dd-item>
<a href=/8/16/>
16_游标：对于数据集中的记录，该怎么逐条处理？
</a>
</li><li data-nav-id=/8/17/ title=17_触发器：如何让数据修改自动触发关联操作，确保数据一致性？ class=dd-item>
<a href=/8/17/>
17_触发器：如何让数据修改自动触发关联操作，确保数据一致性？
</a>
</li><li data-nav-id=/8/18/ title=18_权限管理：如何控制数据库访问，消除安全隐患？ class=dd-item>
<a href=/8/18/>
18_权限管理：如何控制数据库访问，消除安全隐患？
</a>
</li><li data-nav-id=/8/19/ title=19_日志（上）：系统出现问题，如何及时发现？ class=dd-item>
<a href=/8/19/>
19_日志（上）：系统出现问题，如何及时发现？
</a>
</li><li data-nav-id=/8/20/ title=20_日志（下）：系统故障，如何恢复数据？ class=dd-item>
<a href=/8/20/>
20_日志（下）：系统故障，如何恢复数据？
</a>
</li><li data-nav-id=/8/21/ title=21_数据备份：异常情况下，如何确保数据安全？ class=dd-item>
<a href=/8/21/>
21_数据备份：异常情况下，如何确保数据安全？
</a>
</li><li data-nav-id=/8/22/ title=22_范式：如何消除冗余，实现高效存取？ class=dd-item>
<a href=/8/22/>
22_范式：如何消除冗余，实现高效存取？
</a>
</li><li data-nav-id=/8/23/ title=23_ER模型：如何理清数据库设计思路？ class=dd-item>
<a href=/8/23/>
23_ER模型：如何理清数据库设计思路？
</a>
</li><li data-nav-id=/8/24/ title=24_查询有点慢，语句该如何写？ class=dd-item>
<a href=/8/24/>
24_查询有点慢，语句该如何写？
</a>
</li><li data-nav-id=/8/25/ title=25_表太大了，如何设计才能提高性能？ class=dd-item>
<a href=/8/25/>
25_表太大了，如何设计才能提高性能？
</a>
</li><li data-nav-id=/8/26/ title=26_如何充分利用系统资源？ class=dd-item>
<a href=/8/26/>
26_如何充分利用系统资源？
</a>
</li><li data-nav-id=/8/27/ title=27_手把手带你设计一个完整的连锁超市信息系统数据库（上） class=dd-item>
<a href=/8/27/>
27_手把手带你设计一个完整的连锁超市信息系统数据库（上）
</a>
</li><li data-nav-id=/8/28/ title=28_手把手带你设计一个完整的连锁超市信息系统数据库（下） class=dd-item>
<a href=/8/28/>
28_手把手带你设计一个完整的连锁超市信息系统数据库（下）
</a>
</li><li data-nav-id=/8/31/ title=开篇词_在实战中学习，是解锁MySQL技能的最佳方法 class=dd-item>
<a href=/8/31/>
开篇词_在实战中学习，是解锁MySQL技能的最佳方法
</a>
</li><li data-nav-id=/8/32/ title=期末测试_一套习题，测出你的掌握程度 class=dd-item>
<a href=/8/32/>
期末测试_一套习题，测出你的掌握程度
</a>
</li><li data-nav-id=/8/33/ title=特别发送（一）_经典面试题讲解第一弹 class=dd-item>
<a href=/8/33/>
特别发送（一）_经典面试题讲解第一弹
</a>
</li><li data-nav-id=/8/35/ title=特别放送（三）_MySQL8都有哪些新特征？ class=dd-item>
<a href=/8/35/>
特别放送（三）_MySQL8都有哪些新特征？
</a>
</li><li data-nav-id=/8/34/ title=特别放送（二）_经典面试题讲解第二弹 class=dd-item>
<a href=/8/34/>
特别放送（二）_经典面试题讲解第二弹
</a>
</li><li data-nav-id=/8/36/ title=特别放送（四）_位置信息：如何进行空间定位？ class=dd-item>
<a href=/8/36/>
特别放送（四）_位置信息：如何进行空间定位？
</a>
</li><li data-nav-id=/8/29/ title=环境准备_带你安装MySQL和图形化管理工具Workbench class=dd-item>
<a href=/8/29/>
环境准备_带你安装MySQL和图形化管理工具Workbench
</a>
</li><li data-nav-id=/8/30/ title=结束语_不盲从于群体思维，走一条适合自己的路 class=dd-item>
<a href=/8/30/>
结束语_不盲从于群体思维，走一条适合自己的路
</a>
</li></ul></li><li data-nav-id=/1/ title=MySQL实战45讲 class=dd-item>
<a href=/1/>
MySQL实战45讲
</a>
<ul>
<li data-nav-id=/1/1/ title=01_基础架构：一条SQL查询语句是如何执行的？ class=dd-item>
<a href=/1/1/>
01_基础架构：一条SQL查询语句是如何执行的？
</a>
</li><li data-nav-id=/1/2/ title=02_日志系统：一条SQL更新语句是如何执行的？ class=dd-item>
<a href=/1/2/>
02_日志系统：一条SQL更新语句是如何执行的？
</a>
</li><li data-nav-id=/1/3/ title=03_事务隔离：为什么你改了我还看不见？ class=dd-item>
<a href=/1/3/>
03_事务隔离：为什么你改了我还看不见？
</a>
</li><li data-nav-id=/1/4/ title=04_深入浅出索引（上） class=dd-item>
<a href=/1/4/>
04_深入浅出索引（上）
</a>
</li><li data-nav-id=/1/5/ title=05_深入浅出索引（下） class=dd-item>
<a href=/1/5/>
05_深入浅出索引（下）
</a>
</li><li data-nav-id=/1/6/ title=06_全局锁和表锁：给表加个字段怎么有这么多阻碍？ class=dd-item>
<a href=/1/6/>
06_全局锁和表锁：给表加个字段怎么有这么多阻碍？
</a>
</li><li data-nav-id=/1/7/ title=07_行锁功过：怎么减少行锁对性能的影响？ class=dd-item>
<a href=/1/7/>
07_行锁功过：怎么减少行锁对性能的影响？
</a>
</li><li data-nav-id=/1/8/ title=08_事务到底是隔离的还是不隔离的？ class=dd-item>
<a href=/1/8/>
08_事务到底是隔离的还是不隔离的？
</a>
</li><li data-nav-id=/1/9/ title=09_普通索引和唯一索引，应该怎么选择？ class=dd-item>
<a href=/1/9/>
09_普通索引和唯一索引，应该怎么选择？
</a>
</li><li data-nav-id=/1/10/ title=10_MySQL为什么有时候会选错索引？ class=dd-item>
<a href=/1/10/>
10_MySQL为什么有时候会选错索引？
</a>
</li><li data-nav-id=/1/11/ title=11_怎么给字符串字段加索引？ class=dd-item>
<a href=/1/11/>
11_怎么给字符串字段加索引？
</a>
</li><li data-nav-id=/1/12/ title=12_为什么我的MySQL会“抖”一下？ class=dd-item>
<a href=/1/12/>
12_为什么我的MySQL会“抖”一下？
</a>
</li><li data-nav-id=/1/13/ title=13_为什么表数据删掉一半，表文件大小不变？ class=dd-item>
<a href=/1/13/>
13_为什么表数据删掉一半，表文件大小不变？
</a>
</li><li data-nav-id=/1/14/ title=14_count(x)这么慢，我该怎么办？ class=dd-item>
<a href=/1/14/>
14_count(x)这么慢，我该怎么办？
</a>
</li><li data-nav-id=/1/15/ title=15_答疑文章（一）：日志和索引相关问题 class=dd-item>
<a href=/1/15/>
15_答疑文章（一）：日志和索引相关问题
</a>
</li><li data-nav-id=/1/16/ title=16_“orderby”是怎么工作的？ class=dd-item>
<a href=/1/16/>
16_“orderby”是怎么工作的？
</a>
</li><li data-nav-id=/1/17/ title=17_如何正确地显示随机消息？ class=dd-item>
<a href=/1/17/>
17_如何正确地显示随机消息？
</a>
</li><li data-nav-id=/1/18/ title=18_为什么这些SQL语句逻辑相同，性能却差异巨大？ class=dd-item>
<a href=/1/18/>
18_为什么这些SQL语句逻辑相同，性能却差异巨大？
</a>
</li><li data-nav-id=/1/19/ title=19_为什么我只查一行的语句，也执行这么慢？ class=dd-item>
<a href=/1/19/>
19_为什么我只查一行的语句，也执行这么慢？
</a>
</li><li data-nav-id=/1/20/ title=20_幻读是什么，幻读有什么问题？ class=dd-item>
<a href=/1/20/>
20_幻读是什么，幻读有什么问题？
</a>
</li><li data-nav-id=/1/21/ title=21_为什么我只改一行的语句，锁这么多？ class=dd-item>
<a href=/1/21/>
21_为什么我只改一行的语句，锁这么多？
</a>
</li><li data-nav-id=/1/22/ title=22_MySQL有哪些“饮鸩止渴”提高性能的方法？ class=dd-item>
<a href=/1/22/>
22_MySQL有哪些“饮鸩止渴”提高性能的方法？
</a>
</li><li data-nav-id=/1/23/ title=23_MySQL是怎么保证数据不丢的？ class=dd-item>
<a href=/1/23/>
23_MySQL是怎么保证数据不丢的？
</a>
</li><li data-nav-id=/1/24/ title=24_MySQL是怎么保证主备一致的？ class=dd-item>
<a href=/1/24/>
24_MySQL是怎么保证主备一致的？
</a>
</li><li data-nav-id=/1/25/ title=25_MySQL是怎么保证高可用的？ class=dd-item>
<a href=/1/25/>
25_MySQL是怎么保证高可用的？
</a>
</li><li data-nav-id=/1/26/ title=26_备库为什么会延迟好几个小时？ class=dd-item>
<a href=/1/26/>
26_备库为什么会延迟好几个小时？
</a>
</li><li data-nav-id=/1/27/ title=27_主库出问题了，从库怎么办？ class=dd-item>
<a href=/1/27/>
27_主库出问题了，从库怎么办？
</a>
</li><li data-nav-id=/1/28/ title=28_读写分离有哪些坑？ class=dd-item>
<a href=/1/28/>
28_读写分离有哪些坑？
</a>
</li><li data-nav-id=/1/29/ title=29_如何判断一个数据库是不是出问题了？ class=dd-item>
<a href=/1/29/>
29_如何判断一个数据库是不是出问题了？
</a>
</li><li data-nav-id=/1/30/ title=30_答疑文章（二）：用动态的观点看加锁 class=dd-item>
<a href=/1/30/>
30_答疑文章（二）：用动态的观点看加锁
</a>
</li><li data-nav-id=/1/31/ title=31_误删数据后除了跑路，还能怎么办？ class=dd-item>
<a href=/1/31/>
31_误删数据后除了跑路，还能怎么办？
</a>
</li><li data-nav-id=/1/32/ title=32_为什么还有kill不掉的语句？ class=dd-item>
<a href=/1/32/>
32_为什么还有kill不掉的语句？
</a>
</li><li data-nav-id=/1/33/ title=33_我查这么多数据，会不会把数据库内存打爆？ class=dd-item>
<a href=/1/33/>
33_我查这么多数据，会不会把数据库内存打爆？
</a>
</li><li data-nav-id=/1/34/ title=34_到底可不可以使用join？ class=dd-item>
<a href=/1/34/>
34_到底可不可以使用join？
</a>
</li><li data-nav-id=/1/35/ title=35_join语句怎么优化？ class=dd-item>
<a href=/1/35/>
35_join语句怎么优化？
</a>
</li><li data-nav-id=/1/36/ title=36_为什么临时表可以重名？ class=dd-item>
<a href=/1/36/>
36_为什么临时表可以重名？
</a>
</li><li data-nav-id=/1/37/ title=37_什么时候会使用内部临时表？ class=dd-item>
<a href=/1/37/>
37_什么时候会使用内部临时表？
</a>
</li><li data-nav-id=/1/38/ title=38_都说InnoDB好，那还要不要使用Memory引擎？ class=dd-item>
<a href=/1/38/>
38_都说InnoDB好，那还要不要使用Memory引擎？
</a>
</li><li data-nav-id=/1/39/ title=39_自增主键为什么不是连续的？ class=dd-item>
<a href=/1/39/>
39_自增主键为什么不是连续的？
</a>
</li><li data-nav-id=/1/40/ title=40_insert语句的锁为什么这么多？ class=dd-item>
<a href=/1/40/>
40_insert语句的锁为什么这么多？
</a>
</li><li data-nav-id=/1/41/ title=41_怎么最快地复制一张表？ class=dd-item>
<a href=/1/41/>
41_怎么最快地复制一张表？
</a>
</li><li data-nav-id=/1/42/ title=42_grant之后要跟着flushprivileges吗？ class=dd-item>
<a href=/1/42/>
42_grant之后要跟着flushprivileges吗？
</a>
</li><li data-nav-id=/1/43/ title=43_要不要使用分区表？ class=dd-item>
<a href=/1/43/>
43_要不要使用分区表？
</a>
</li><li data-nav-id=/1/44/ title=44_答疑文章（三）：说一说这些好问题 class=dd-item>
<a href=/1/44/>
44_答疑文章（三）：说一说这些好问题
</a>
</li><li data-nav-id=/1/45/ title=45_自增id用完怎么办？ class=dd-item>
<a href=/1/45/>
45_自增id用完怎么办？
</a>
</li><li data-nav-id=/1/47/ title=开篇词_这一次，让我们一起来搞懂MySQL class=dd-item>
<a href=/1/47/>
开篇词_这一次，让我们一起来搞懂MySQL
</a>
</li><li data-nav-id=/1/48/ title=直播回顾_林晓斌：我的MySQL心路历程 class=dd-item>
<a href=/1/48/>
直播回顾_林晓斌：我的MySQL心路历程
</a>
</li><li data-nav-id=/1/46/ title=结束语_点线网面，一起构建MySQL知识网络 class=dd-item>
<a href=/1/46/>
结束语_点线网面，一起构建MySQL知识网络
</a>
</li><li data-nav-id=/1/49/ title=结课测试｜这些MySQL知识你都掌握了吗？ class=dd-item>
<a href=/1/49/>
结课测试｜这些MySQL知识你都掌握了吗？
</a>
</li></ul></li><li data-nav-id=/3/ title=手把手带你写一门编程语言 class=dd-item>
<a href=/3/>
手把手带你写一门编程语言
</a>
<ul>
<li data-nav-id=/3/3/ title=01｜实现一门超简单的语言最快需要多久？ class=dd-item>
<a href=/3/3/>
01｜实现一门超简单的语言最快需要多久？
</a>
</li><li data-nav-id=/3/4/ title=02｜词法分析：识别Token也可以很简单吗？ class=dd-item>
<a href=/3/4/>
02｜词法分析：识别Token也可以很简单吗？
</a>
</li><li data-nav-id=/3/5/ title=03｜支持表达式：解析表达式和解析语句有什么不同？ class=dd-item>
<a href=/3/5/>
03｜支持表达式：解析表达式和解析语句有什么不同？
</a>
</li><li data-nav-id=/3/6/ title=04｜如何让我们的语言支持变量和类型？ class=dd-item>
<a href=/3/6/>
04｜如何让我们的语言支持变量和类型？
</a>
</li><li data-nav-id=/3/7/ title=05｜函数实现：是时候让我们的语言支持函数和返回值了 class=dd-item>
<a href=/3/7/>
05｜函数实现：是时候让我们的语言支持函数和返回值了
</a>
</li><li data-nav-id=/3/8/ title=06｜怎么支持条件语句和循环语句？ class=dd-item>
<a href=/3/8/>
06｜怎么支持条件语句和循环语句？
</a>
</li><li data-nav-id=/3/9/ title=07｜怎么设计属于我们自己的虚拟机和字节码？ class=dd-item>
<a href=/3/9/>
07｜怎么设计属于我们自己的虚拟机和字节码？
</a>
</li><li data-nav-id=/3/10/ title=08｜基于TypeScript的虚拟机（一）：实现一个简单的栈机 class=dd-item>
<a href=/3/10/>
08｜基于TypeScript的虚拟机（一）：实现一个简单的栈机
</a>
</li><li data-nav-id=/3/11/ title=09｜基于TypeScript的虚拟机（二）：丰富特性，支持跳转语句 class=dd-item>
<a href=/3/11/>
09｜基于TypeScript的虚拟机（二）：丰富特性，支持跳转语句
</a>
</li><li data-nav-id=/3/12/ title=10｜基于C语言的虚拟机（一）：实现一个简单的栈机 class=dd-item>
<a href=/3/12/>
10｜基于C语言的虚拟机（一）：实现一个简单的栈机
</a>
</li><li data-nav-id=/3/13/ title=11｜基于C语言的虚拟机（二）：性能增长10倍的秘密 class=dd-item>
<a href=/3/13/>
11｜基于C语言的虚拟机（二）：性能增长10倍的秘密
</a>
</li><li data-nav-id=/3/14/ title=12｜物理机上程序运行的硬件环境是怎么样的？ class=dd-item>
<a href=/3/14/>
12｜物理机上程序运行的硬件环境是怎么样的？
</a>
</li><li data-nav-id=/3/15/ title=13｜物理机上程序运行的软件环境是怎么样的？ class=dd-item>
<a href=/3/15/>
13｜物理机上程序运行的软件环境是怎么样的？
</a>
</li><li data-nav-id=/3/16/ title=14｜汇编代码学习（一）：熟悉CPU架构和指令集 class=dd-item>
<a href=/3/16/>
14｜汇编代码学习（一）：熟悉CPU架构和指令集
</a>
</li><li data-nav-id=/3/17/ title=15｜汇编语言学习（二）：熟悉X86汇编代码 class=dd-item>
<a href=/3/17/>
15｜汇编语言学习（二）：熟悉X86汇编代码
</a>
</li><li data-nav-id=/3/18/ title=16｜生成本地代码第1关：先把基础搭好 class=dd-item>
<a href=/3/18/>
16｜生成本地代码第1关：先把基础搭好
</a>
</li><li data-nav-id=/3/19/ title=17｜生成本地代码第2关：变量存储、函数调用和栈帧维护 class=dd-item>
<a href=/3/19/>
17｜生成本地代码第2关：变量存储、函数调用和栈帧维护
</a>
</li><li data-nav-id=/3/20/ title=18｜生成本地代码第3关：实现完整的功能 class=dd-item>
<a href=/3/20/>
18｜生成本地代码第3关：实现完整的功能
</a>
</li><li data-nav-id=/3/21/ title=19｜怎么实现一个更好的寄存器分配算法：原理篇 class=dd-item>
<a href=/3/21/>
19｜怎么实现一个更好的寄存器分配算法：原理篇
</a>
</li><li data-nav-id=/3/22/ title=20｜怎么实现一个更好的寄存器分配算法：实现篇 class=dd-item>
<a href=/3/22/>
20｜怎么实现一个更好的寄存器分配算法：实现篇
</a>
</li><li data-nav-id=/3/23/ title=21｜加深对栈的理解：实现尾递归和尾调用优化 class=dd-item>
<a href=/3/23/>
21｜加深对栈的理解：实现尾递归和尾调用优化
</a>
</li><li data-nav-id=/3/24/ title=22｜增强编译器前端功能第1步：再识数据流分析技术 class=dd-item>
<a href=/3/24/>
22｜增强编译器前端功能第1步：再识数据流分析技术
</a>
</li><li data-nav-id=/3/25/ title=23｜增强编译器前端功能第2步：增强类型体系 class=dd-item>
<a href=/3/25/>
23｜增强编译器前端功能第2步：增强类型体系
</a>
</li><li data-nav-id=/3/26/ title=24｜增强编译器前端功能第3步：全面的集合运算 class=dd-item>
<a href=/3/26/>
24｜增强编译器前端功能第3步：全面的集合运算
</a>
</li><li data-nav-id=/3/27/ title=25｜增强编译器前端功能第4步：综合运用多种语义分析技术 class=dd-item>
<a href=/3/27/>
25｜增强编译器前端功能第4步：综合运用多种语义分析技术
</a>
</li><li data-nav-id=/3/28/ title=26｜增强更丰富的类型第1步：如何支持浮点数？ class=dd-item>
<a href=/3/28/>
26｜增强更丰富的类型第1步：如何支持浮点数？
</a>
</li><li data-nav-id=/3/29/ title=27｜增加更丰富的类型第2步：如何支持字符串？ class=dd-item>
<a href=/3/29/>
27｜增加更丰富的类型第2步：如何支持字符串？
</a>
</li><li data-nav-id=/3/30/ title=28｜增加更丰富的类型第3步：支持数组 class=dd-item>
<a href=/3/30/>
28｜增加更丰富的类型第3步：支持数组
</a>
</li><li data-nav-id=/3/31/ title=29｜面向对象编程第1步：先把基础搭好 class=dd-item>
<a href=/3/31/>
29｜面向对象编程第1步：先把基础搭好
</a>
</li><li data-nav-id=/3/32/ title=30｜面向对象编程第2步：剖析一些技术细节 class=dd-item>
<a href=/3/32/>
30｜面向对象编程第2步：剖析一些技术细节
</a>
</li><li data-nav-id=/3/33/ title=31｜面向对象编程第3步：支持继承和多态 class=dd-item>
<a href=/3/33/>
31｜面向对象编程第3步：支持继承和多态
</a>
</li><li data-nav-id=/3/34/ title=32｜函数式编程第1关：实现高阶函数 class=dd-item>
<a href=/3/34/>
32｜函数式编程第1关：实现高阶函数
</a>
</li><li data-nav-id=/3/35/ title=33｜函数式编程第2关：实现闭包特性 class=dd-item>
<a href=/3/35/>
33｜函数式编程第2关：实现闭包特性
</a>
</li><li data-nav-id=/3/36/ title=34｜内存管理第1关：Arena技术和元数据 class=dd-item>
<a href=/3/36/>
34｜内存管理第1关：Arena技术和元数据
</a>
</li><li data-nav-id=/3/37/ title=35｜内存管理第2关：实现垃圾回收 class=dd-item>
<a href=/3/37/>
35｜内存管理第2关：实现垃圾回收
</a>
</li><li data-nav-id=/3/38/ title=36｜节点之海：怎么生成基于图的IR？ class=dd-item>
<a href=/3/38/>
36｜节点之海：怎么生成基于图的IR？
</a>
</li><li data-nav-id=/3/39/ title=37_从AST到IR：体会数据流和控制流思维 class=dd-item>
<a href=/3/39/>
37_从AST到IR：体会数据流和控制流思维
</a>
</li><li data-nav-id=/3/40/ title=38｜中端优化第1关：实现多种本地优化 class=dd-item>
<a href=/3/40/>
38｜中端优化第1关：实现多种本地优化
</a>
</li><li data-nav-id=/3/41/ title=39｜中端优化第2关：全局优化要怎么搞？ class=dd-item>
<a href=/3/41/>
39｜中端优化第2关：全局优化要怎么搞？
</a>
</li><li data-nav-id=/3/42/ title=40｜中端优化第3关：一起来挑战过程间优化 class=dd-item>
<a href=/3/42/>
40｜中端优化第3关：一起来挑战过程间优化
</a>
</li><li data-nav-id=/3/43/ title=41｜后端优化：生成LIR和指令选择 class=dd-item>
<a href=/3/43/>
41｜后端优化：生成LIR和指令选择
</a>
</li><li data-nav-id=/3/44/ title=42｜到这里，我们的收获和未尽的工作有哪些？ class=dd-item>
<a href=/3/44/>
42｜到这里，我们的收获和未尽的工作有哪些？
</a>
</li><li data-nav-id=/3/1/ title=“他山之石”｜Sugar：这门课你可以试试这么学 class=dd-item>
<a href=/3/1/>
“他山之石”｜Sugar：这门课你可以试试这么学
</a>
</li><li data-nav-id=/3/2/ title=“屠龙之秘”｜实现计算机语言这样的技术能用在哪里？（一） class=dd-item>
<a href=/3/2/>
“屠龙之秘”｜实现计算机语言这样的技术能用在哪里？（一）
</a>
</li><li data-nav-id=/3/46/ title=开篇词｜让我们来写一门计算机语言吧 class=dd-item>
<a href=/3/46/>
开篇词｜让我们来写一门计算机语言吧
</a>
</li><li data-nav-id=/3/49/ title=期中测试｜快来检验你在起步篇的学习成果吧 class=dd-item>
<a href=/3/49/>
期中测试｜快来检验你在起步篇的学习成果吧
</a>
</li><li data-nav-id=/3/48/ title=期末考试｜实现编程语言这些核心知识点，你掌握得咋样了？ class=dd-item>
<a href=/3/48/>
期末考试｜实现编程语言这些核心知识点，你掌握得咋样了？
</a>
</li><li data-nav-id=/3/45/ title=结束语｜等待你大展身手的那些领域 class=dd-item>
<a href=/3/45/>
结束语｜等待你大展身手的那些领域
</a>
</li><li data-nav-id=/3/47/ title=课前热身｜开始学习之前我们要准备什么？ class=dd-item>
<a href=/3/47/>
课前热身｜开始学习之前我们要准备什么？
</a>
</li></ul></li><li data-nav-id=/9/ title=操作系统实战45讲 class="dd-item
parent">
<a href=/9/>
操作系统实战45讲
</a>
<ul>
<li data-nav-id=/9/1/ title=01_程序的运行过程：从代码到机器运行 class=dd-item>
<a href=/9/1/>
01_程序的运行过程：从代码到机器运行
</a>
</li><li data-nav-id=/9/2/ title=02_几行汇编几行C：实现一个最简单的内核 class=dd-item>
<a href=/9/2/>
02_几行汇编几行C：实现一个最简单的内核
</a>
</li><li data-nav-id=/9/3/ title=03_黑盒之中有什么：内核结构与设计 class=dd-item>
<a href=/9/3/>
03_黑盒之中有什么：内核结构与设计
</a>
</li><li data-nav-id=/9/4/ title=04_震撼的Linux全景图：业界成熟的内核架构长什么样？ class=dd-item>
<a href=/9/4/>
04_震撼的Linux全景图：业界成熟的内核架构长什么样？
</a>
</li><li data-nav-id=/9/5/ title=05_CPU工作模式：执行程序的三种模式 class=dd-item>
<a href=/9/5/>
05_CPU工作模式：执行程序的三种模式
</a>
</li><li data-nav-id=/9/6/ title=06_虚幻与真实：程序中的地址如何转换？ class=dd-item>
<a href=/9/6/>
06_虚幻与真实：程序中的地址如何转换？
</a>
</li><li data-nav-id=/9/7/ title=07_Cache与内存：程序放在哪儿？ class=dd-item>
<a href=/9/7/>
07_Cache与内存：程序放在哪儿？
</a>
</li><li data-nav-id=/9/8/ title=08_锁：并发操作中，解决数据同步的四种方法 class="dd-item active">
<a href=/9/8/>
08_锁：并发操作中，解决数据同步的四种方法
</a>
</li><li data-nav-id=/9/9/ title=09_瞧一瞧Linux：Linux的自旋锁和信号量如何实现？ class=dd-item>
<a href=/9/9/>
09_瞧一瞧Linux：Linux的自旋锁和信号量如何实现？
</a>
</li><li data-nav-id=/9/10/ title=10_设置工作模式与环境（上）：建立计算机 class=dd-item>
<a href=/9/10/>
10_设置工作模式与环境（上）：建立计算机
</a>
</li><li data-nav-id=/9/11/ title=11_设置工作模式与环境（中）：建造二级引导器 class=dd-item>
<a href=/9/11/>
11_设置工作模式与环境（中）：建造二级引导器
</a>
</li><li data-nav-id=/9/12/ title=12_设置工作模式与环境（下）：探查和收集信息 class=dd-item>
<a href=/9/12/>
12_设置工作模式与环境（下）：探查和收集信息
</a>
</li><li data-nav-id=/9/13/ title=13_第一个C函数：如何实现板级初始化？ class=dd-item>
<a href=/9/13/>
13_第一个C函数：如何实现板级初始化？
</a>
</li><li data-nav-id=/9/14/ title=14_Linux初始化（上）：GRUB与vmlinuz的结构 class=dd-item>
<a href=/9/14/>
14_Linux初始化（上）：GRUB与vmlinuz的结构
</a>
</li><li data-nav-id=/9/15/ title=15_Linux初始化（下）：从_start到第一个进程 class=dd-item>
<a href=/9/15/>
15_Linux初始化（下）：从_start到第一个进程
</a>
</li><li data-nav-id=/9/16/ title=16_划分土地（上）：如何划分与组织内存？ class=dd-item>
<a href=/9/16/>
16_划分土地（上）：如何划分与组织内存？
</a>
</li><li data-nav-id=/9/17/ title=17_划分土地（中）：如何实现内存页面初始化？ class=dd-item>
<a href=/9/17/>
17_划分土地（中）：如何实现内存页面初始化？
</a>
</li><li data-nav-id=/9/18/ title=18_划分土地（下）：如何实现内存页的分配与释放？ class=dd-item>
<a href=/9/18/>
18_划分土地（下）：如何实现内存页的分配与释放？
</a>
</li><li data-nav-id=/9/19/ title=19_土地不能浪费：如何管理内存对象？ class=dd-item>
<a href=/9/19/>
19_土地不能浪费：如何管理内存对象？
</a>
</li><li data-nav-id=/9/20/ title=20_土地需求扩大与保障：如何表示虚拟内存？ class=dd-item>
<a href=/9/20/>
20_土地需求扩大与保障：如何表示虚拟内存？
</a>
</li><li data-nav-id=/9/21/ title=21_土地需求扩大与保障：如何分配和释放虚拟内存？ class=dd-item>
<a href=/9/21/>
21_土地需求扩大与保障：如何分配和释放虚拟内存？
</a>
</li><li data-nav-id=/9/22/ title=22_瞧一瞧Linux：伙伴系统如何分配内存？ class=dd-item>
<a href=/9/22/>
22_瞧一瞧Linux：伙伴系统如何分配内存？
</a>
</li><li data-nav-id=/9/23/ title=23_瞧一瞧Linux：SLAB如何分配内存？ class=dd-item>
<a href=/9/23/>
23_瞧一瞧Linux：SLAB如何分配内存？
</a>
</li><li data-nav-id=/9/24/ title=24_活动的描述：到底什么是进程？ class=dd-item>
<a href=/9/24/>
24_活动的描述：到底什么是进程？
</a>
</li><li data-nav-id=/9/25/ title=25_多个活动要安排（上）：多进程如何调度？ class=dd-item>
<a href=/9/25/>
25_多个活动要安排（上）：多进程如何调度？
</a>
</li><li data-nav-id=/9/26/ title=26_多个活动要安排（下）：如何实现进程的等待与唤醒机制？ class=dd-item>
<a href=/9/26/>
26_多个活动要安排（下）：如何实现进程的等待与唤醒机制？
</a>
</li><li data-nav-id=/9/27/ title=27_瞧一瞧Linux：Linux如何实现进程与进程调度 class=dd-item>
<a href=/9/27/>
27_瞧一瞧Linux：Linux如何实现进程与进程调度
</a>
</li><li data-nav-id=/9/28/ title=28_部门分类：如何表示设备类型与设备驱动？ class=dd-item>
<a href=/9/28/>
28_部门分类：如何表示设备类型与设备驱动？
</a>
</li><li data-nav-id=/9/29/ title=29_部门建立：如何在内核中注册设备？ class=dd-item>
<a href=/9/29/>
29_部门建立：如何在内核中注册设备？
</a>
</li><li data-nav-id=/9/30/ title=30_部门响应：设备如何处理内核IO包？ class=dd-item>
<a href=/9/30/>
30_部门响应：设备如何处理内核IO包？
</a>
</li><li data-nav-id=/9/31/ title=31_瞧一瞧Linux：如何获取所有设备信息？ class=dd-item>
<a href=/9/31/>
31_瞧一瞧Linux：如何获取所有设备信息？
</a>
</li><li data-nav-id=/9/32/ title=32_仓库结构：如何组织文件 class=dd-item>
<a href=/9/32/>
32_仓库结构：如何组织文件
</a>
</li><li data-nav-id=/9/33/ title=33_仓库划分：文件系统的格式化操作 class=dd-item>
<a href=/9/33/>
33_仓库划分：文件系统的格式化操作
</a>
</li><li data-nav-id=/9/34/ title=34_仓库管理：如何实现文件的六大基本操作？ class=dd-item>
<a href=/9/34/>
34_仓库管理：如何实现文件的六大基本操作？
</a>
</li><li data-nav-id=/9/35/ title=35_瞧一瞧Linux：虚拟文件系统如何管理文件？ class=dd-item>
<a href=/9/35/>
35_瞧一瞧Linux：虚拟文件系统如何管理文件？
</a>
</li><li data-nav-id=/9/36/ title=36_从URL到网卡：如何全局观察网络数据流动？ class=dd-item>
<a href=/9/36/>
36_从URL到网卡：如何全局观察网络数据流动？
</a>
</li><li data-nav-id=/9/37/ title=37_从内核到应用：网络数据在内核中如何流转 class=dd-item>
<a href=/9/37/>
37_从内核到应用：网络数据在内核中如何流转
</a>
</li><li data-nav-id=/9/38/ title=38_从单排到团战：详解操作系统的宏观网络架构 class=dd-item>
<a href=/9/38/>
38_从单排到团战：详解操作系统的宏观网络架构
</a>
</li><li data-nav-id=/9/39/ title=39_瞧一瞧Linux：详解socket实现与网络编程接口 class=dd-item>
<a href=/9/39/>
39_瞧一瞧Linux：详解socket实现与网络编程接口
</a>
</li><li data-nav-id=/9/40/ title=40_瞧一瞧Linux：详解socket的接口实现 class=dd-item>
<a href=/9/40/>
40_瞧一瞧Linux：详解socket的接口实现
</a>
</li><li data-nav-id=/9/41/ title=41_服务接口：如何搭建沟通桥梁？ class=dd-item>
<a href=/9/41/>
41_服务接口：如何搭建沟通桥梁？
</a>
</li><li data-nav-id=/9/42/ title=42_瞧一瞧Linux：如何实现系统API？ class=dd-item>
<a href=/9/42/>
42_瞧一瞧Linux：如何实现系统API？
</a>
</li><li data-nav-id=/9/43/ title=43_虚拟机内核：KVM是什么？ class=dd-item>
<a href=/9/43/>
43_虚拟机内核：KVM是什么？
</a>
</li><li data-nav-id=/9/44/ title=44_容器：如何理解容器的实现机制？ class=dd-item>
<a href=/9/44/>
44_容器：如何理解容器的实现机制？
</a>
</li><li data-nav-id=/9/45/ title=45_ARM新宠：苹果的M1芯片因何而快？ class=dd-item>
<a href=/9/45/>
45_ARM新宠：苹果的M1芯片因何而快？
</a>
</li><li data-nav-id=/9/46/ title=46_AArch64体系：ARM最新编程架构模型剖析 class=dd-item>
<a href=/9/46/>
46_AArch64体系：ARM最新编程架构模型剖析
</a>
</li><li data-nav-id=/9/48/ title=参考答案_对答案，是再次学习的一个机会 class=dd-item>
<a href=/9/48/>
参考答案_对答案，是再次学习的一个机会
</a>
</li><li data-nav-id=/9/51/ title=开篇词_为什么要学写一个操作系统？ class=dd-item>
<a href=/9/51/>
开篇词_为什么要学写一个操作系统？
</a>
</li><li data-nav-id=/9/52/ title=用户故事_yiyang：我的上机实验“爬坑指南” class=dd-item>
<a href=/9/52/>
用户故事_yiyang：我的上机实验“爬坑指南”
</a>
</li><li data-nav-id=/9/54/ title=用户故事_成为面向“知识库”的工程师 class=dd-item>
<a href=/9/54/>
用户故事_成为面向“知识库”的工程师
</a>
</li><li data-nav-id=/9/55/ title=用户故事_技术人如何做选择，路才越走越宽？ class=dd-item>
<a href=/9/55/>
用户故事_技术人如何做选择，路才越走越宽？
</a>
</li><li data-nav-id=/9/53/ title=用户故事_操作系统发烧友：看不懂？因为你没动手 class=dd-item>
<a href=/9/53/>
用户故事_操作系统发烧友：看不懂？因为你没动手
</a>
</li><li data-nav-id=/9/56/ title=用户故事_用好动态调试，助力课程学习 class=dd-item>
<a href=/9/56/>
用户故事_用好动态调试，助力课程学习
</a>
</li><li data-nav-id=/9/50/ title=结束语_生活可以一地鸡毛，但操作系统却是心中的光 class=dd-item>
<a href=/9/50/>
结束语_生活可以一地鸡毛，但操作系统却是心中的光
</a>
</li><li data-nav-id=/9/49/ title=结课测试｜这些操作系统的问题，你都掌握了么？ class=dd-item>
<a href=/9/49/>
结课测试｜这些操作系统的问题，你都掌握了么？
</a>
</li><li data-nav-id=/9/47/ title=编辑手记_升级认知，迭代自己的操作系统 class=dd-item>
<a href=/9/47/>
编辑手记_升级认知，迭代自己的操作系统
</a>
</li></ul></li><li data-nav-id=/2/ title=数据结构与算法之美 class=dd-item>
<a href=/2/>
数据结构与算法之美
</a>
<ul>
<li data-nav-id=/2/2/ title=01_为什么要学习数据结构和算法？ class=dd-item>
<a href=/2/2/>
01_为什么要学习数据结构和算法？
</a>
</li><li data-nav-id=/2/3/ title=02_如何抓住重点，系统高效地学习数据结构与算法？ class=dd-item>
<a href=/2/3/>
02_如何抓住重点，系统高效地学习数据结构与算法？
</a>
</li><li data-nav-id=/2/4/ title=03_复杂度分析（上）：如何分析、统计算法的执行效率和资源消耗？ class=dd-item>
<a href=/2/4/>
03_复杂度分析（上）：如何分析、统计算法的执行效率和资源消耗？
</a>
</li><li data-nav-id=/2/5/ title=04_复杂度分析（下）：浅析最好、最坏、平均、均摊时间复杂度 class=dd-item>
<a href=/2/5/>
04_复杂度分析（下）：浅析最好、最坏、平均、均摊时间复杂度
</a>
</li><li data-nav-id=/2/6/ title=05_数组：为什么很多编程语言中数组都从0开始编号？ class=dd-item>
<a href=/2/6/>
05_数组：为什么很多编程语言中数组都从0开始编号？
</a>
</li><li data-nav-id=/2/7/ title=06_链表（上）：如何实现LRU缓存淘汰算法 class=dd-item>
<a href=/2/7/>
06_链表（上）：如何实现LRU缓存淘汰算法
</a>
</li><li data-nav-id=/2/8/ title=07_链表（下）：如何轻松写出正确的链表代码？ class=dd-item>
<a href=/2/8/>
07_链表（下）：如何轻松写出正确的链表代码？
</a>
</li><li data-nav-id=/2/9/ title=08_栈：如何实现浏览器的前进和后退功能？ class=dd-item>
<a href=/2/9/>
08_栈：如何实现浏览器的前进和后退功能？
</a>
</li><li data-nav-id=/2/10/ title=09_队列：队列在线程池等有限资源池中的应用 class=dd-item>
<a href=/2/10/>
09_队列：队列在线程池等有限资源池中的应用
</a>
</li><li data-nav-id=/2/11/ title=10_递归：如何用三行代码找到“最终推荐人”？ class=dd-item>
<a href=/2/11/>
10_递归：如何用三行代码找到“最终推荐人”？
</a>
</li><li data-nav-id=/2/12/ title=11_排序（上）：为什么插入排序比冒泡排序更受欢迎？ class=dd-item>
<a href=/2/12/>
11_排序（上）：为什么插入排序比冒泡排序更受欢迎？
</a>
</li><li data-nav-id=/2/13/ title=12_排序（下）：如何用快排思想在O(n)内查找第K大元素？ class=dd-item>
<a href=/2/13/>
12_排序（下）：如何用快排思想在O(n)内查找第K大元素？
</a>
</li><li data-nav-id=/2/14/ title=13_线性排序：如何根据年龄给100万用户数据排序？ class=dd-item>
<a href=/2/14/>
13_线性排序：如何根据年龄给100万用户数据排序？
</a>
</li><li data-nav-id=/2/15/ title=14_排序优化：如何实现一个通用的、高性能的排序函数？ class=dd-item>
<a href=/2/15/>
14_排序优化：如何实现一个通用的、高性能的排序函数？
</a>
</li><li data-nav-id=/2/16/ title=15_二分查找（上）：如何用最省内存的方式实现快速查找功能？ class=dd-item>
<a href=/2/16/>
15_二分查找（上）：如何用最省内存的方式实现快速查找功能？
</a>
</li><li data-nav-id=/2/17/ title=16_二分查找（下）：如何快速定位IP对应的省份地址？ class=dd-item>
<a href=/2/17/>
16_二分查找（下）：如何快速定位IP对应的省份地址？
</a>
</li><li data-nav-id=/2/18/ title=17_跳表：为什么Redis一定要用跳表来实现有序集合？ class=dd-item>
<a href=/2/18/>
17_跳表：为什么Redis一定要用跳表来实现有序集合？
</a>
</li><li data-nav-id=/2/19/ title=18_散列表（上）：Word文档中的单词拼写检查功能是如何实现的？ class=dd-item>
<a href=/2/19/>
18_散列表（上）：Word文档中的单词拼写检查功能是如何实现的？
</a>
</li><li data-nav-id=/2/20/ title=19_散列表（中）：如何打造一个工业级水平的散列表？ class=dd-item>
<a href=/2/20/>
19_散列表（中）：如何打造一个工业级水平的散列表？
</a>
</li><li data-nav-id=/2/21/ title=20_散列表（下）：为什么散列表和链表经常会一起使用？ class=dd-item>
<a href=/2/21/>
20_散列表（下）：为什么散列表和链表经常会一起使用？
</a>
</li><li data-nav-id=/2/22/ title=21_哈希算法（上）：如何防止数据库中的用户信息被脱库？ class=dd-item>
<a href=/2/22/>
21_哈希算法（上）：如何防止数据库中的用户信息被脱库？
</a>
</li><li data-nav-id=/2/23/ title=22_哈希算法（下）：哈希算法在分布式系统中有哪些应用？ class=dd-item>
<a href=/2/23/>
22_哈希算法（下）：哈希算法在分布式系统中有哪些应用？
</a>
</li><li data-nav-id=/2/24/ title=23_二叉树基础（上）：什么样的二叉树适合用数组来存储？ class=dd-item>
<a href=/2/24/>
23_二叉树基础（上）：什么样的二叉树适合用数组来存储？
</a>
</li><li data-nav-id=/2/25/ title=24_二叉树基础（下）：有了如此高效的散列表，为什么还需要二叉树？ class=dd-item>
<a href=/2/25/>
24_二叉树基础（下）：有了如此高效的散列表，为什么还需要二叉树？
</a>
</li><li data-nav-id=/2/26/ title=25_红黑树（上）：为什么工程中都用红黑树这种二叉树？ class=dd-item>
<a href=/2/26/>
25_红黑树（上）：为什么工程中都用红黑树这种二叉树？
</a>
</li><li data-nav-id=/2/27/ title=26_红黑树（下）：掌握这些技巧，你也可以实现一个红黑树 class=dd-item>
<a href=/2/27/>
26_红黑树（下）：掌握这些技巧，你也可以实现一个红黑树
</a>
</li><li data-nav-id=/2/28/ title=27_递归树：如何借助树来求解递归算法的时间复杂度？ class=dd-item>
<a href=/2/28/>
27_递归树：如何借助树来求解递归算法的时间复杂度？
</a>
</li><li data-nav-id=/2/29/ title=28_堆和堆排序：为什么说堆排序没有快速排序快？ class=dd-item>
<a href=/2/29/>
28_堆和堆排序：为什么说堆排序没有快速排序快？
</a>
</li><li data-nav-id=/2/30/ title=29_堆的应用：如何快速获取到Top10最热门的搜索关键词？ class=dd-item>
<a href=/2/30/>
29_堆的应用：如何快速获取到Top10最热门的搜索关键词？
</a>
</li><li data-nav-id=/2/31/ title=30_图的表示：如何存储微博、微信等社交网络中的好友关系？ class=dd-item>
<a href=/2/31/>
30_图的表示：如何存储微博、微信等社交网络中的好友关系？
</a>
</li><li data-nav-id=/2/32/ title=31_深度和广度优先搜索：如何找出社交网络中的三度好友关系？ class=dd-item>
<a href=/2/32/>
31_深度和广度优先搜索：如何找出社交网络中的三度好友关系？
</a>
</li><li data-nav-id=/2/33/ title=32_字符串匹配基础（上）：如何借助哈希算法实现高效字符串匹配？ class=dd-item>
<a href=/2/33/>
32_字符串匹配基础（上）：如何借助哈希算法实现高效字符串匹配？
</a>
</li><li data-nav-id=/2/34/ title=33_字符串匹配基础（中）：如何实现文本编辑器中的查找功能？ class=dd-item>
<a href=/2/34/>
33_字符串匹配基础（中）：如何实现文本编辑器中的查找功能？
</a>
</li><li data-nav-id=/2/35/ title=34_字符串匹配基础（下）：如何借助BM算法轻松理解KMP算法？ class=dd-item>
<a href=/2/35/>
34_字符串匹配基础（下）：如何借助BM算法轻松理解KMP算法？
</a>
</li><li data-nav-id=/2/36/ title=35_Trie树：如何实现搜索引擎的搜索关键词提示功能？ class=dd-item>
<a href=/2/36/>
35_Trie树：如何实现搜索引擎的搜索关键词提示功能？
</a>
</li><li data-nav-id=/2/37/ title=36_AC自动机：如何用多模式串匹配实现敏感词过滤功能？ class=dd-item>
<a href=/2/37/>
36_AC自动机：如何用多模式串匹配实现敏感词过滤功能？
</a>
</li><li data-nav-id=/2/38/ title=37_贪心算法：如何用贪心算法实现Huffman压缩编码？ class=dd-item>
<a href=/2/38/>
37_贪心算法：如何用贪心算法实现Huffman压缩编码？
</a>
</li><li data-nav-id=/2/39/ title=38_分治算法：谈一谈大规模计算框架MapReduce中的分治思想 class=dd-item>
<a href=/2/39/>
38_分治算法：谈一谈大规模计算框架MapReduce中的分治思想
</a>
</li><li data-nav-id=/2/40/ title=39_回溯算法：从电影《蝴蝶效应》中学习回溯算法的核心思想 class=dd-item>
<a href=/2/40/>
39_回溯算法：从电影《蝴蝶效应》中学习回溯算法的核心思想
</a>
</li><li data-nav-id=/2/41/ title=40_初识动态规划：如何巧妙解决“双十一”购物时的凑单问题？ class=dd-item>
<a href=/2/41/>
40_初识动态规划：如何巧妙解决“双十一”购物时的凑单问题？
</a>
</li><li data-nav-id=/2/42/ title=41_动态规划理论：一篇文章带你彻底搞懂最优子结构、无后效性和重复子问题 class=dd-item>
<a href=/2/42/>
41_动态规划理论：一篇文章带你彻底搞懂最优子结构、无后效性和重复子问题
</a>
</li><li data-nav-id=/2/43/ title=42_动态规划实战：如何实现搜索引擎中的拼写纠错功能？ class=dd-item>
<a href=/2/43/>
42_动态规划实战：如何实现搜索引擎中的拼写纠错功能？
</a>
</li><li data-nav-id=/2/44/ title=43_拓扑排序：如何确定代码源文件的编译依赖关系？ class=dd-item>
<a href=/2/44/>
43_拓扑排序：如何确定代码源文件的编译依赖关系？
</a>
</li><li data-nav-id=/2/45/ title=44_最短路径：地图软件是如何计算出最优出行路径的？ class=dd-item>
<a href=/2/45/>
44_最短路径：地图软件是如何计算出最优出行路径的？
</a>
</li><li data-nav-id=/2/46/ title=45_位图：如何实现网页爬虫中的URL去重功能？ class=dd-item>
<a href=/2/46/>
45_位图：如何实现网页爬虫中的URL去重功能？
</a>
</li><li data-nav-id=/2/47/ title=46_概率统计：如何利用朴素贝叶斯算法过滤垃圾短信？ class=dd-item>
<a href=/2/47/>
46_概率统计：如何利用朴素贝叶斯算法过滤垃圾短信？
</a>
</li><li data-nav-id=/2/48/ title=47_向量空间：如何实现一个简单的音乐推荐系统？ class=dd-item>
<a href=/2/48/>
47_向量空间：如何实现一个简单的音乐推荐系统？
</a>
</li><li data-nav-id=/2/49/ title=48_B+树：MySQL数据库索引是如何实现的？ class=dd-item>
<a href=/2/49/>
48_B+树：MySQL数据库索引是如何实现的？
</a>
</li><li data-nav-id=/2/50/ title=49_搜索：如何用Ax搜索算法实现游戏中的寻路功能？ class=dd-item>
<a href=/2/50/>
49_搜索：如何用Ax搜索算法实现游戏中的寻路功能？
</a>
</li><li data-nav-id=/2/51/ title=50_索引：如何在海量数据中快速查找某个数据？ class=dd-item>
<a href=/2/51/>
50_索引：如何在海量数据中快速查找某个数据？
</a>
</li><li data-nav-id=/2/52/ title=51_并行算法：如何利用并行处理提高算法的执行效率？ class=dd-item>
<a href=/2/52/>
51_并行算法：如何利用并行处理提高算法的执行效率？
</a>
</li><li data-nav-id=/2/53/ title=52_算法实战（一）：剖析Redis常用数据类型对应的数据结构 class=dd-item>
<a href=/2/53/>
52_算法实战（一）：剖析Redis常用数据类型对应的数据结构
</a>
</li><li data-nav-id=/2/54/ title=53_算法实战（二）：剖析搜索引擎背后的经典数据结构和算法 class=dd-item>
<a href=/2/54/>
53_算法实战（二）：剖析搜索引擎背后的经典数据结构和算法
</a>
</li><li data-nav-id=/2/55/ title=54_算法实战（三）：剖析高性能队列Disruptor背后的数据结构和算法 class=dd-item>
<a href=/2/55/>
54_算法实战（三）：剖析高性能队列Disruptor背后的数据结构和算法
</a>
</li><li data-nav-id=/2/56/ title=55_算法实战（四）：剖析微服务接口鉴权限流背后的数据结构和算法 class=dd-item>
<a href=/2/56/>
55_算法实战（四）：剖析微服务接口鉴权限流背后的数据结构和算法
</a>
</li><li data-nav-id=/2/57/ title=56_算法实战（五）：如何用学过的数据结构和算法实现一个短网址系统？ class=dd-item>
<a href=/2/57/>
56_算法实战（五）：如何用学过的数据结构和算法实现一个短网址系统？
</a>
</li><li data-nav-id=/2/1/ title=《数据结构与算法之美》学习指导手册 class=dd-item>
<a href=/2/1/>
《数据结构与算法之美》学习指导手册
</a>
</li><li data-nav-id=/2/61/ title=不定期福利第一期_数据结构与算法学习书单 class=dd-item>
<a href=/2/61/>
不定期福利第一期_数据结构与算法学习书单
</a>
</li><li data-nav-id=/2/59/ title=不定期福利第三期_测一测你的算法阶段学习成果 class=dd-item>
<a href=/2/59/>
不定期福利第三期_测一测你的算法阶段学习成果
</a>
</li><li data-nav-id=/2/58/ title=不定期福利第二期_王争：羁绊前行的，不是肆虐的狂风，而是内心的迷茫 class=dd-item>
<a href=/2/58/>
不定期福利第二期_王争：羁绊前行的，不是肆虐的狂风，而是内心的迷茫
</a>
</li><li data-nav-id=/2/60/ title=不定期福利第四期_刘超：我是怎么学习《数据结构与算法之美》的？ class=dd-item>
<a href=/2/60/>
不定期福利第四期_刘超：我是怎么学习《数据结构与算法之美》的？
</a>
</li><li data-nav-id=/2/77/ title=开篇词_从今天起，跨过“数据结构与算法”这道坎 class=dd-item>
<a href=/2/77/>
开篇词_从今天起，跨过“数据结构与算法”这道坎
</a>
</li><li data-nav-id=/2/81/ title=总结课_在实际开发中，如何权衡选择使用哪种数据结构和算法？ class=dd-item>
<a href=/2/81/>
总结课_在实际开发中，如何权衡选择使用哪种数据结构和算法？
</a>
</li><li data-nav-id=/2/69/ title=打卡召集令_60天攻克数据结构与算法 class=dd-item>
<a href=/2/69/>
打卡召集令_60天攻克数据结构与算法
</a>
</li><li data-nav-id=/2/73/ title=打卡召集令_第一阶段知识总结 class=dd-item>
<a href=/2/73/>
打卡召集令_第一阶段知识总结
</a>
</li><li data-nav-id=/2/71/ title=打卡召集令_第三阶段知识总结 class=dd-item>
<a href=/2/71/>
打卡召集令_第三阶段知识总结
</a>
</li><li data-nav-id=/2/70/ title=打卡召集令_第二阶段知识总结 class=dd-item>
<a href=/2/70/>
打卡召集令_第二阶段知识总结
</a>
</li><li data-nav-id=/2/72/ title=打卡召集令_第四阶段知识总结 class=dd-item>
<a href=/2/72/>
打卡召集令_第四阶段知识总结
</a>
</li><li data-nav-id=/2/62/ title=春节7天练_Day1：数组和链表 class=dd-item>
<a href=/2/62/>
春节7天练_Day1：数组和链表
</a>
</li><li data-nav-id=/2/63/ title=春节7天练_Day2：栈、队列和递归 class=dd-item>
<a href=/2/63/>
春节7天练_Day2：栈、队列和递归
</a>
</li><li data-nav-id=/2/64/ title=春节7天练_Day3：排序和二分查找 class=dd-item>
<a href=/2/64/>
春节7天练_Day3：排序和二分查找
</a>
</li><li data-nav-id=/2/65/ title=春节7天练_Day4：散列表和字符串 class=dd-item>
<a href=/2/65/>
春节7天练_Day4：散列表和字符串
</a>
</li><li data-nav-id=/2/66/ title=春节7天练_Day5：二叉树和堆 class=dd-item>
<a href=/2/66/>
春节7天练_Day5：二叉树和堆
</a>
</li><li data-nav-id=/2/67/ title=春节7天练_Day6：图 class=dd-item>
<a href=/2/67/>
春节7天练_Day6：图
</a>
</li><li data-nav-id=/2/68/ title=春节7天练_Day7：贪心、分治、回溯和动态规划 class=dd-item>
<a href=/2/68/>
春节7天练_Day7：贪心、分治、回溯和动态规划
</a>
</li><li data-nav-id=/2/79/ title=用户故事_Jerry银银：这一年我的脑海里只有算法 class=dd-item>
<a href=/2/79/>
用户故事_Jerry银银：这一年我的脑海里只有算法
</a>
</li><li data-nav-id=/2/80/ title=用户故事_zixuan：站在思维的高处，才有足够的视野和能力欣赏“美” class=dd-item>
<a href=/2/80/>
用户故事_zixuan：站在思维的高处，才有足够的视野和能力欣赏“美”
</a>
</li><li data-nav-id=/2/74/ title=第2季回归_这一次，我们一起拿下设计模式！ class=dd-item>
<a href=/2/74/>
第2季回归_这一次，我们一起拿下设计模式！
</a>
</li><li data-nav-id=/2/76/ title=结束语_送君千里，终须一别 class=dd-item>
<a href=/2/76/>
结束语_送君千里，终须一别
</a>
</li><li data-nav-id=/2/75/ title=结课测试｜这些数据结构与算法，你真的掌握了吗？ class=dd-item>
<a href=/2/75/>
结课测试｜这些数据结构与算法，你真的掌握了吗？
</a>
</li><li data-nav-id=/2/78/ title=课程迭代｜全新交付71讲音频 class=dd-item>
<a href=/2/78/>
课程迭代｜全新交付71讲音频
</a>
</li></ul></li><li data-nav-id=/4/ title=深入浅出计算机组成原理 class=dd-item>
<a href=/4/>
深入浅出计算机组成原理
</a>
<ul>
<li data-nav-id=/4/1/ title=01_冯·诺依曼体系结构：计算机组成的金字塔 class=dd-item>
<a href=/4/1/>
01_冯·诺依曼体系结构：计算机组成的金字塔
</a>
</li><li data-nav-id=/4/2/ title=02_给你一张知识地图，计算机组成原理应该这么学 class=dd-item>
<a href=/4/2/>
02_给你一张知识地图，计算机组成原理应该这么学
</a>
</li><li data-nav-id=/4/3/ title=03_通过你的CPU主频，我们来谈谈“性能”究竟是什么？ class=dd-item>
<a href=/4/3/>
03_通过你的CPU主频，我们来谈谈“性能”究竟是什么？
</a>
</li><li data-nav-id=/4/4/ title=04_穿越功耗墙，我们该从哪些方面提升“性能”？ class=dd-item>
<a href=/4/4/>
04_穿越功耗墙，我们该从哪些方面提升“性能”？
</a>
</li><li data-nav-id=/4/5/ title=05_计算机指令：让我们试试用纸带编程 class=dd-item>
<a href=/4/5/>
05_计算机指令：让我们试试用纸带编程
</a>
</li><li data-nav-id=/4/6/ title=06_指令跳转：原来if...else就是goto class=dd-item>
<a href=/4/6/>
06_指令跳转：原来if...else就是goto
</a>
</li><li data-nav-id=/4/7/ title=07_函数调用：为什么会发生stackoverflow？ class=dd-item>
<a href=/4/7/>
07_函数调用：为什么会发生stackoverflow？
</a>
</li><li data-nav-id=/4/8/ title=08_ELF和静态链接：为什么程序无法同时在Linux和Windows下运行？ class=dd-item>
<a href=/4/8/>
08_ELF和静态链接：为什么程序无法同时在Linux和Windows下运行？
</a>
</li><li data-nav-id=/4/9/ title=09_程序装载：“640K内存”真的不够用么？ class=dd-item>
<a href=/4/9/>
09_程序装载：“640K内存”真的不够用么？
</a>
</li><li data-nav-id=/4/10/ title=10_动态链接：程序内部的“共享单车” class=dd-item>
<a href=/4/10/>
10_动态链接：程序内部的“共享单车”
</a>
</li><li data-nav-id=/4/11/ title=11_二进制编码：“手持两把锟斤拷，口中疾呼烫烫烫”？ class=dd-item>
<a href=/4/11/>
11_二进制编码：“手持两把锟斤拷，口中疾呼烫烫烫”？
</a>
</li><li data-nav-id=/4/12/ title=12_理解电路：从电报机到门电路，我们如何做到“千里传信”？ class=dd-item>
<a href=/4/12/>
12_理解电路：从电报机到门电路，我们如何做到“千里传信”？
</a>
</li><li data-nav-id=/4/13/ title=13_加法器：如何像搭乐高一样搭电路（上）？ class=dd-item>
<a href=/4/13/>
13_加法器：如何像搭乐高一样搭电路（上）？
</a>
</li><li data-nav-id=/4/14/ title=14_乘法器：如何像搭乐高一样搭电路（下）？ class=dd-item>
<a href=/4/14/>
14_乘法器：如何像搭乐高一样搭电路（下）？
</a>
</li><li data-nav-id=/4/15/ title=15_浮点数和定点数（上）：怎么用有限的Bit表示尽可能多的信息？ class=dd-item>
<a href=/4/15/>
15_浮点数和定点数（上）：怎么用有限的Bit表示尽可能多的信息？
</a>
</li><li data-nav-id=/4/16/ title=16_浮点数和定点数（下）：深入理解浮点数到底有什么用？ class=dd-item>
<a href=/4/16/>
16_浮点数和定点数（下）：深入理解浮点数到底有什么用？
</a>
</li><li data-nav-id=/4/17/ title="17_建立数据通路（上）：指令+运算=CPU" class=dd-item>
<a href=/4/17/>
17_建立数据通路（上）：指令+运算=CPU
</a>
</li><li data-nav-id=/4/18/ title="18_建立数据通路（中）：指令+运算=CPU" class=dd-item>
<a href=/4/18/>
18_建立数据通路（中）：指令+运算=CPU
</a>
</li><li data-nav-id=/4/19/ title="19_建立数据通路（下）：指令+运算=CPU" class=dd-item>
<a href=/4/19/>
19_建立数据通路（下）：指令+运算=CPU
</a>
</li><li data-nav-id=/4/20/ title=20_面向流水线的指令设计（上）：一心多用的现代CPU class=dd-item>
<a href=/4/20/>
20_面向流水线的指令设计（上）：一心多用的现代CPU
</a>
</li><li data-nav-id=/4/21/ title=21_面向流水线的指令设计（下）：奔腾4是怎么失败的？ class=dd-item>
<a href=/4/21/>
21_面向流水线的指令设计（下）：奔腾4是怎么失败的？
</a>
</li><li data-nav-id=/4/22/ title=22_冒险和预测（一）：hazard是“危”也是“机” class=dd-item>
<a href=/4/22/>
22_冒险和预测（一）：hazard是“危”也是“机”
</a>
</li><li data-nav-id=/4/23/ title=23_冒险和预测（二）：流水线里的接力赛 class=dd-item>
<a href=/4/23/>
23_冒险和预测（二）：流水线里的接力赛
</a>
</li><li data-nav-id=/4/24/ title=24_冒险和预测（三）：CPU里的“线程池” class=dd-item>
<a href=/4/24/>
24_冒险和预测（三）：CPU里的“线程池”
</a>
</li><li data-nav-id=/4/25/ title=25_冒险和预测（四）：今天下雨了，明天还会下雨么？ class=dd-item>
<a href=/4/25/>
25_冒险和预测（四）：今天下雨了，明天还会下雨么？
</a>
</li><li data-nav-id=/4/26/ title=26_Superscalar和VLIW：如何让CPU的吞吐率超过1？ class=dd-item>
<a href=/4/26/>
26_Superscalar和VLIW：如何让CPU的吞吐率超过1？
</a>
</li><li data-nav-id=/4/27/ title=27_SIMD：如何加速矩阵乘法？ class=dd-item>
<a href=/4/27/>
27_SIMD：如何加速矩阵乘法？
</a>
</li><li data-nav-id=/4/28/ title=28_异常和中断：程序出错了怎么办？ class=dd-item>
<a href=/4/28/>
28_异常和中断：程序出错了怎么办？
</a>
</li><li data-nav-id=/4/29/ title=29_CISC和RISC：为什么手机芯片都是ARM？ class=dd-item>
<a href=/4/29/>
29_CISC和RISC：为什么手机芯片都是ARM？
</a>
</li><li data-nav-id=/4/30/ title=30_GPU（上）：为什么玩游戏需要使用GPU？ class=dd-item>
<a href=/4/30/>
30_GPU（上）：为什么玩游戏需要使用GPU？
</a>
</li><li data-nav-id=/4/31/ title=31_GPU（下）：为什么深度学习需要使用GPU？ class=dd-item>
<a href=/4/31/>
31_GPU（下）：为什么深度学习需要使用GPU？
</a>
</li><li data-nav-id=/4/32/ title=32_FPGA和ASIC：计算机体系结构的黄金时代 class=dd-item>
<a href=/4/32/>
32_FPGA和ASIC：计算机体系结构的黄金时代
</a>
</li><li data-nav-id=/4/33/ title=33_解读TPU：设计和拆解一块ASIC芯片 class=dd-item>
<a href=/4/33/>
33_解读TPU：设计和拆解一块ASIC芯片
</a>
</li><li data-nav-id=/4/34/ title=34_理解虚拟机：你在云上拿到的计算机是什么样的？ class=dd-item>
<a href=/4/34/>
34_理解虚拟机：你在云上拿到的计算机是什么样的？
</a>
</li><li data-nav-id=/4/35/ title=35_存储器层次结构全景：数据存储的大金字塔长什么样？ class=dd-item>
<a href=/4/35/>
35_存储器层次结构全景：数据存储的大金字塔长什么样？
</a>
</li><li data-nav-id=/4/36/ title=36_局部性原理：数据库性能跟不上，加个缓存就好了？ class=dd-item>
<a href=/4/36/>
36_局部性原理：数据库性能跟不上，加个缓存就好了？
</a>
</li><li data-nav-id=/4/37/ title=37_高速缓存（上）：“4毫秒”究竟值多少钱？ class=dd-item>
<a href=/4/37/>
37_高速缓存（上）：“4毫秒”究竟值多少钱？
</a>
</li><li data-nav-id=/4/38/ title=38_高速缓存（下）：你确定你的数据更新了么？ class=dd-item>
<a href=/4/38/>
38_高速缓存（下）：你确定你的数据更新了么？
</a>
</li><li data-nav-id=/4/39/ title=39_MESI协议：如何让多核CPU的高速缓存保持一致？ class=dd-item>
<a href=/4/39/>
39_MESI协议：如何让多核CPU的高速缓存保持一致？
</a>
</li><li data-nav-id=/4/40/ title=40_理解内存（上）：虚拟内存和内存保护是什么？ class=dd-item>
<a href=/4/40/>
40_理解内存（上）：虚拟内存和内存保护是什么？
</a>
</li><li data-nav-id=/4/41/ title=41_理解内存（下）：解析TLB和内存保护 class=dd-item>
<a href=/4/41/>
41_理解内存（下）：解析TLB和内存保护
</a>
</li><li data-nav-id=/4/42/ title=42_总线：计算机内部的高速公路 class=dd-item>
<a href=/4/42/>
42_总线：计算机内部的高速公路
</a>
</li><li data-nav-id=/4/43/ title=43_输入输出设备：我们并不是只能用灯泡显示“0”和“1” class=dd-item>
<a href=/4/43/>
43_输入输出设备：我们并不是只能用灯泡显示“0”和“1”
</a>
</li><li data-nav-id=/4/44/ title=44_理解IO_WAIT：IO性能到底是怎么回事儿？ class=dd-item>
<a href=/4/44/>
44_理解IO_WAIT：IO性能到底是怎么回事儿？
</a>
</li><li data-nav-id=/4/45/ title=45_机械硬盘：Google早期用过的“黑科技” class=dd-item>
<a href=/4/45/>
45_机械硬盘：Google早期用过的“黑科技”
</a>
</li><li data-nav-id=/4/46/ title=46_SSD硬盘（上）：如何完成性能优化的KPI？ class=dd-item>
<a href=/4/46/>
46_SSD硬盘（上）：如何完成性能优化的KPI？
</a>
</li><li data-nav-id=/4/47/ title=47_SSD硬盘（下）：如何完成性能优化的KPI？ class=dd-item>
<a href=/4/47/>
47_SSD硬盘（下）：如何完成性能优化的KPI？
</a>
</li><li data-nav-id=/4/48/ title=48_DMA：为什么Kafka这么快？ class=dd-item>
<a href=/4/48/>
48_DMA：为什么Kafka这么快？
</a>
</li><li data-nav-id=/4/49/ title=49_数据完整性（上）：硬件坏了怎么办？ class=dd-item>
<a href=/4/49/>
49_数据完整性（上）：硬件坏了怎么办？
</a>
</li><li data-nav-id=/4/50/ title=50_数据完整性（下）：如何还原犯罪现场？ class=dd-item>
<a href=/4/50/>
50_数据完整性（下）：如何还原犯罪现场？
</a>
</li><li data-nav-id=/4/51/ title=51_分布式计算：如果所有人的大脑都联网会怎样？ class=dd-item>
<a href=/4/51/>
51_分布式计算：如果所有人的大脑都联网会怎样？
</a>
</li><li data-nav-id=/4/52/ title=52_设计大型DMP系统（上）：MongoDB并不是什么灵丹妙药 class=dd-item>
<a href=/4/52/>
52_设计大型DMP系统（上）：MongoDB并不是什么灵丹妙药
</a>
</li><li data-nav-id=/4/53/ title=53_设计大型DMP系统（下）：SSD拯救了所有的DBA class=dd-item>
<a href=/4/53/>
53_设计大型DMP系统（下）：SSD拯救了所有的DBA
</a>
</li><li data-nav-id=/4/54/ title=54_理解Disruptor（上）：带你体会CPU高速缓存的风驰电掣 class=dd-item>
<a href=/4/54/>
54_理解Disruptor（上）：带你体会CPU高速缓存的风驰电掣
</a>
</li><li data-nav-id=/4/55/ title=55_理解Disruptor（下）：不需要换挡和踩刹车的CPU，有多快？ class=dd-item>
<a href=/4/55/>
55_理解Disruptor（下）：不需要换挡和踩刹车的CPU，有多快？
</a>
</li><li data-nav-id=/4/57/ title=FAQ第一期_学与不学，知识就在那里，不如就先学好了 class=dd-item>
<a href=/4/57/>
FAQ第一期_学与不学，知识就在那里，不如就先学好了
</a>
</li><li data-nav-id=/4/56/ title=FAQ第二期_世界上第一个编程语言是怎么来的？ class=dd-item>
<a href=/4/56/>
FAQ第二期_世界上第一个编程语言是怎么来的？
</a>
</li><li data-nav-id=/4/59/ title=开篇词_为什么你需要学习计算机组成原理？ class=dd-item>
<a href=/4/59/>
开篇词_为什么你需要学习计算机组成原理？
</a>
</li><li data-nav-id=/4/61/ title=特别加餐_我在2019年F8大会的两日见闻录 class=dd-item>
<a href=/4/61/>
特别加餐_我在2019年F8大会的两日见闻录
</a>
</li><li data-nav-id=/4/60/ title=特别加餐_我的一天怎么过？ class=dd-item>
<a href=/4/60/>
特别加餐_我的一天怎么过？
</a>
</li><li data-nav-id=/4/62/ title=用户故事_赵文海：怕什么真理无穷，进一寸有一寸的欢喜 class=dd-item>
<a href=/4/62/>
用户故事_赵文海：怕什么真理无穷，进一寸有一寸的欢喜
</a>
</li><li data-nav-id=/4/58/ title=结束语_知也无涯，愿你也享受发现的乐趣 class=dd-item>
<a href=/4/58/>
结束语_知也无涯，愿你也享受发现的乐趣
</a>
</li></ul></li><li data-nav-id=/6/ title=编译原理之美 class=dd-item>
<a href=/6/>
编译原理之美
</a>
<ul>
<li data-nav-id=/6/1/ title=01_理解代码：编译器的前端技术 class=dd-item>
<a href=/6/1/>
01_理解代码：编译器的前端技术
</a>
</li><li data-nav-id=/6/2/ title=02_正则文法和有限自动机：纯手工打造词法分析器 class=dd-item>
<a href=/6/2/>
02_正则文法和有限自动机：纯手工打造词法分析器
</a>
</li><li data-nav-id=/6/3/ title=03_语法分析（一）：纯手工打造公式计算器 class=dd-item>
<a href=/6/3/>
03_语法分析（一）：纯手工打造公式计算器
</a>
</li><li data-nav-id=/6/4/ title=04_语法分析（二）：解决二元表达式中的难点 class=dd-item>
<a href=/6/4/>
04_语法分析（二）：解决二元表达式中的难点
</a>
</li><li data-nav-id=/6/5/ title=05_语法分析（三）：实现一门简单的脚本语言 class=dd-item>
<a href=/6/5/>
05_语法分析（三）：实现一门简单的脚本语言
</a>
</li><li data-nav-id=/6/6/ title=06_编译器前端工具（一）：用Antlr生成词法、语法分析器 class=dd-item>
<a href=/6/6/>
06_编译器前端工具（一）：用Antlr生成词法、语法分析器
</a>
</li><li data-nav-id=/6/7/ title=07_编译器前端工具（二）：用Antlr重构脚本语言 class=dd-item>
<a href=/6/7/>
07_编译器前端工具（二）：用Antlr重构脚本语言
</a>
</li><li data-nav-id=/6/8/ title=08_作用域和生存期：实现块作用域和函数 class=dd-item>
<a href=/6/8/>
08_作用域和生存期：实现块作用域和函数
</a>
</li><li data-nav-id=/6/9/ title=09_面向对象：实现数据和方法的封装 class=dd-item>
<a href=/6/9/>
09_面向对象：实现数据和方法的封装
</a>
</li><li data-nav-id=/6/10/ title=10_闭包：理解了原理，它就不反直觉了 class=dd-item>
<a href=/6/10/>
10_闭包：理解了原理，它就不反直觉了
</a>
</li><li data-nav-id=/6/11/ title=11_语义分析（上）：如何建立一个完善的类型系统？ class=dd-item>
<a href=/6/11/>
11_语义分析（上）：如何建立一个完善的类型系统？
</a>
</li><li data-nav-id=/6/12/ title=12_语义分析（下）：如何做上下文相关情况的处理？ class=dd-item>
<a href=/6/12/>
12_语义分析（下）：如何做上下文相关情况的处理？
</a>
</li><li data-nav-id=/6/13/ title=13_继承和多态：面向对象运行期的动态特性 class=dd-item>
<a href=/6/13/>
13_继承和多态：面向对象运行期的动态特性
</a>
</li><li data-nav-id=/6/14/ title=14_前端技术应用（一）：如何透明地支持数据库分库分表？ class=dd-item>
<a href=/6/14/>
14_前端技术应用（一）：如何透明地支持数据库分库分表？
</a>
</li><li data-nav-id=/6/15/ title=15_前端技术应用（二）：如何设计一个报表工具？ class=dd-item>
<a href=/6/15/>
15_前端技术应用（二）：如何设计一个报表工具？
</a>
</li><li data-nav-id=/6/16/ title=16_NFA和DFA：如何自己实现一个正则表达式工具？ class=dd-item>
<a href=/6/16/>
16_NFA和DFA：如何自己实现一个正则表达式工具？
</a>
</li><li data-nav-id=/6/17/ title=17_First和Follow集合：用LL算法推演一个实例 class=dd-item>
<a href=/6/17/>
17_First和Follow集合：用LL算法推演一个实例
</a>
</li><li data-nav-id=/6/18/ title=18_移进和规约：用LR算法推演一个实例 class=dd-item>
<a href=/6/18/>
18_移进和规约：用LR算法推演一个实例
</a>
</li><li data-nav-id=/6/19/ title=19_案例总结与热点问题答疑：对于左递归的语法，为什么我的推导不是左递归的？ class=dd-item>
<a href=/6/19/>
19_案例总结与热点问题答疑：对于左递归的语法，为什么我的推导不是左递归的？
</a>
</li><li data-nav-id=/6/20/ title=20_高效运行：编译器的后端技术 class=dd-item>
<a href=/6/20/>
20_高效运行：编译器的后端技术
</a>
</li><li data-nav-id=/6/21/ title=21_运行时机制：突破现象看本质，透过语法看运行时 class=dd-item>
<a href=/6/21/>
21_运行时机制：突破现象看本质，透过语法看运行时
</a>
</li><li data-nav-id=/6/22/ title=22_生成汇编代码（一）：汇编语言其实不难学 class=dd-item>
<a href=/6/22/>
22_生成汇编代码（一）：汇编语言其实不难学
</a>
</li><li data-nav-id=/6/23/ title=23_生成汇编代码（二）：把脚本编译成可执行文件 class=dd-item>
<a href=/6/23/>
23_生成汇编代码（二）：把脚本编译成可执行文件
</a>
</li><li data-nav-id=/6/24/ title=24_中间代码：兼容不同的语言和硬件 class=dd-item>
<a href=/6/24/>
24_中间代码：兼容不同的语言和硬件
</a>
</li><li data-nav-id=/6/25/ title=25_后端技术的重用：LLVM不仅仅让你高效 class=dd-item>
<a href=/6/25/>
25_后端技术的重用：LLVM不仅仅让你高效
</a>
</li><li data-nav-id=/6/26/ title=26_生成IR：实现静态编译的语言 class=dd-item>
<a href=/6/26/>
26_生成IR：实现静态编译的语言
</a>
</li><li data-nav-id=/6/27/ title=27_代码优化：为什么你的代码比他的更高效？ class=dd-item>
<a href=/6/27/>
27_代码优化：为什么你的代码比他的更高效？
</a>
</li><li data-nav-id=/6/28/ title=28_数据流分析：你写的程序，它更懂 class=dd-item>
<a href=/6/28/>
28_数据流分析：你写的程序，它更懂
</a>
</li><li data-nav-id=/6/29/ title=29_目标代码的生成和优化（一）：如何适应各种硬件架构？ class=dd-item>
<a href=/6/29/>
29_目标代码的生成和优化（一）：如何适应各种硬件架构？
</a>
</li><li data-nav-id=/6/30/ title=30_目标代码的生成和优化（二）：如何适应各种硬件架构？ class=dd-item>
<a href=/6/30/>
30_目标代码的生成和优化（二）：如何适应各种硬件架构？
</a>
</li><li data-nav-id=/6/31/ title=31_内存计算：对海量数据做计算，到底可以有多快？ class=dd-item>
<a href=/6/31/>
31_内存计算：对海量数据做计算，到底可以有多快？
</a>
</li><li data-nav-id=/6/32/ title=32_字节码生成：为什么Spring技术很强大？ class=dd-item>
<a href=/6/32/>
32_字节码生成：为什么Spring技术很强大？
</a>
</li><li data-nav-id=/6/33/ title=33_垃圾收集：能否不停下整个世界？ class=dd-item>
<a href=/6/33/>
33_垃圾收集：能否不停下整个世界？
</a>
</li><li data-nav-id=/6/34/ title=34_运行时优化：即时编译的原理和作用 class=dd-item>
<a href=/6/34/>
34_运行时优化：即时编译的原理和作用
</a>
</li><li data-nav-id=/6/35/ title=35_案例总结与热点问题答疑：后端部分真的比前端部分难吗？ class=dd-item>
<a href=/6/35/>
35_案例总结与热点问题答疑：后端部分真的比前端部分难吗？
</a>
</li><li data-nav-id=/6/36/ title=36_当前技术的发展趋势以及其对编译技术的影响 class=dd-item>
<a href=/6/36/>
36_当前技术的发展趋势以及其对编译技术的影响
</a>
</li><li data-nav-id=/6/37/ title=37_云编程：云计算会如何改变编程模式？ class=dd-item>
<a href=/6/37/>
37_云编程：云计算会如何改变编程模式？
</a>
</li><li data-nav-id=/6/38/ title=38_元编程：一边写程序，一边写语言 class=dd-item>
<a href=/6/38/>
38_元编程：一边写程序，一边写语言
</a>
</li><li data-nav-id=/6/40/ title=加餐_汇编代码编程与栈帧管理 class=dd-item>
<a href=/6/40/>
加餐_汇编代码编程与栈帧管理
</a>
</li><li data-nav-id=/6/43/ title=开篇词_为什么你要学习编译原理？ class=dd-item>
<a href=/6/43/>
开篇词_为什么你要学习编译原理？
</a>
</li><li data-nav-id=/6/44/ title=期中考试_来赴一场100分的约定吧！ class=dd-item>
<a href=/6/44/>
期中考试_来赴一场100分的约定吧！
</a>
</li><li data-nav-id=/6/45/ title=用户故事_因为热爱，所以坚持 class=dd-item>
<a href=/6/45/>
用户故事_因为热爱，所以坚持
</a>
</li><li data-nav-id=/6/39/ title=第二季回归_这次，我们一起实战解析真实世界的编译器 class=dd-item>
<a href=/6/39/>
第二季回归_这次，我们一起实战解析真实世界的编译器
</a>
</li><li data-nav-id=/6/42/ title=结束语_用程序语言，推动这个世界的演化 class=dd-item>
<a href=/6/42/>
结束语_用程序语言，推动这个世界的演化
</a>
</li><li data-nav-id=/6/41/ title=结课测试_编译原理的这些知识，你都掌握了吗？ class=dd-item>
<a href=/6/41/>
结课测试_编译原理的这些知识，你都掌握了吗？
</a>
</li></ul></li><li data-nav-id=/7/ title=编译原理实战课 class=dd-item>
<a href=/7/>
编译原理实战课
</a>
<ul>
<li data-nav-id=/7/1/ title=01_编译的全过程都悄悄做了哪些事情？ class=dd-item>
<a href=/7/1/>
01_编译的全过程都悄悄做了哪些事情？
</a>
</li><li data-nav-id=/7/2/ title=02_词法分析：用两种方式构造有限自动机 class=dd-item>
<a href=/7/2/>
02_词法分析：用两种方式构造有限自动机
</a>
</li><li data-nav-id=/7/3/ title=03_语法分析：两个基本功和两种算法思路 class=dd-item>
<a href=/7/3/>
03_语法分析：两个基本功和两种算法思路
</a>
</li><li data-nav-id=/7/4/ title=04_语义分析：让程序符合语义规则 class=dd-item>
<a href=/7/4/>
04_语义分析：让程序符合语义规则
</a>
</li><li data-nav-id=/7/5/ title=05_运行时机制：程序如何运行，你有发言权 class=dd-item>
<a href=/7/5/>
05_运行时机制：程序如何运行，你有发言权
</a>
</li><li data-nav-id=/7/6/ title=06_中间代码：不是只有一副面孔 class=dd-item>
<a href=/7/6/>
06_中间代码：不是只有一副面孔
</a>
</li><li data-nav-id=/7/7/ title=07_代码优化：跟编译器做朋友，让你的代码飞起来 class=dd-item>
<a href=/7/7/>
07_代码优化：跟编译器做朋友，让你的代码飞起来
</a>
</li><li data-nav-id=/7/8/ title=08_代码生成：如何实现机器相关的优化？ class=dd-item>
<a href=/7/8/>
08_代码生成：如何实现机器相关的优化？
</a>
</li><li data-nav-id=/7/9/ title=09_Java编译器（一）：手写的编译器有什么优势？ class=dd-item>
<a href=/7/9/>
09_Java编译器（一）：手写的编译器有什么优势？
</a>
</li><li data-nav-id=/7/10/ title=10_Java编译器（二）：语法分析之后，还要做些什么？ class=dd-item>
<a href=/7/10/>
10_Java编译器（二）：语法分析之后，还要做些什么？
</a>
</li><li data-nav-id=/7/11/ title=11_Java编译器（三）：属性分析和数据流分析 class=dd-item>
<a href=/7/11/>
11_Java编译器（三）：属性分析和数据流分析
</a>
</li><li data-nav-id=/7/12/ title=12_Java编译器（四）：去除语法糖和生成字节码 class=dd-item>
<a href=/7/12/>
12_Java编译器（四）：去除语法糖和生成字节码
</a>
</li><li data-nav-id=/7/13/ title=13_JavaJIT编译器（一）：动手修改Graal编译器 class=dd-item>
<a href=/7/13/>
13_JavaJIT编译器（一）：动手修改Graal编译器
</a>
</li><li data-nav-id=/7/14/ title=14_JavaJIT编译器（二）：SeaofNodes为何如此强大？ class=dd-item>
<a href=/7/14/>
14_JavaJIT编译器（二）：SeaofNodes为何如此强大？
</a>
</li><li data-nav-id=/7/15/ title=15_JavaJIT编译器（三）：探究内联和逃逸分析的算法原理 class=dd-item>
<a href=/7/15/>
15_JavaJIT编译器（三）：探究内联和逃逸分析的算法原理
</a>
</li><li data-nav-id=/7/16/ title=16_JavaJIT编译器（四）：Graal的后端是如何工作的？ class=dd-item>
<a href=/7/16/>
16_JavaJIT编译器（四）：Graal的后端是如何工作的？
</a>
</li><li data-nav-id=/7/17/ title=17_Python编译器（一）：如何用工具生成编译器？ class=dd-item>
<a href=/7/17/>
17_Python编译器（一）：如何用工具生成编译器？
</a>
</li><li data-nav-id=/7/18/ title=18_Python编译器（二）：从AST到字节码 class=dd-item>
<a href=/7/18/>
18_Python编译器（二）：从AST到字节码
</a>
</li><li data-nav-id=/7/19/ title=19_Python编译器（三）：运行时机制 class=dd-item>
<a href=/7/19/>
19_Python编译器（三）：运行时机制
</a>
</li><li data-nav-id=/7/20/ title=20_JavaScript编译器（一）：V8的解析和编译过程 class=dd-item>
<a href=/7/20/>
20_JavaScript编译器（一）：V8的解析和编译过程
</a>
</li><li data-nav-id=/7/21/ title=21_JavaScript编译器（二）：V8的解释器和优化编译器 class=dd-item>
<a href=/7/21/>
21_JavaScript编译器（二）：V8的解释器和优化编译器
</a>
</li><li data-nav-id=/7/22/ title=22_Julia编译器（一）：如何让动态语言性能很高？ class=dd-item>
<a href=/7/22/>
22_Julia编译器（一）：如何让动态语言性能很高？
</a>
</li><li data-nav-id=/7/23/ title=23_Julia编译器（二）：如何利用LLVM的优化和后端功能？ class=dd-item>
<a href=/7/23/>
23_Julia编译器（二）：如何利用LLVM的优化和后端功能？
</a>
</li><li data-nav-id=/7/24/ title=24_Go语言编译器：把它当作教科书吧 class=dd-item>
<a href=/7/24/>
24_Go语言编译器：把它当作教科书吧
</a>
</li><li data-nav-id=/7/25/ title=25_MySQL编译器（一）：解析一条SQL语句的执行过程 class=dd-item>
<a href=/7/25/>
25_MySQL编译器（一）：解析一条SQL语句的执行过程
</a>
</li><li data-nav-id=/7/26/ title=26_MySQL编译器（二）：编译技术如何帮你提升数据库性能？ class=dd-item>
<a href=/7/26/>
26_MySQL编译器（二）：编译技术如何帮你提升数据库性能？
</a>
</li><li data-nav-id=/7/27/ title=27_课前导读：学习现代语言设计的正确姿势 class=dd-item>
<a href=/7/27/>
27_课前导读：学习现代语言设计的正确姿势
</a>
</li><li data-nav-id=/7/28/ title=28_前端总结：语言设计也有人机工程学 class=dd-item>
<a href=/7/28/>
28_前端总结：语言设计也有人机工程学
</a>
</li><li data-nav-id=/7/29/ title=29_中端总结：不遗余力地进行代码优化 class=dd-item>
<a href=/7/29/>
29_中端总结：不遗余力地进行代码优化
</a>
</li><li data-nav-id=/7/30/ title=30_后端总结：充分发挥硬件的能力 class=dd-item>
<a href=/7/30/>
30_后端总结：充分发挥硬件的能力
</a>
</li><li data-nav-id=/7/31/ title=31_运行时（一）：从0到语言级的虚拟化 class=dd-item>
<a href=/7/31/>
31_运行时（一）：从0到语言级的虚拟化
</a>
</li><li data-nav-id=/7/32/ title=32_运行时（二）：垃圾收集与语言的特性有关吗？ class=dd-item>
<a href=/7/32/>
32_运行时（二）：垃圾收集与语言的特性有关吗？
</a>
</li><li data-nav-id=/7/33/ title=33_并发中的编译技术（一）：如何从语言层面支持线程？ class=dd-item>
<a href=/7/33/>
33_并发中的编译技术（一）：如何从语言层面支持线程？
</a>
</li><li data-nav-id=/7/34/ title=34_并发中的编译技术（二）：如何从语言层面支持协程？ class=dd-item>
<a href=/7/34/>
34_并发中的编译技术（二）：如何从语言层面支持协程？
</a>
</li><li data-nav-id=/7/35/ title=35_并发中的编译技术（三）：Erlang语言厉害在哪里？ class=dd-item>
<a href=/7/35/>
35_并发中的编译技术（三）：Erlang语言厉害在哪里？
</a>
</li><li data-nav-id=/7/36/ title=36_高级特性（一）：揭秘元编程的实现机制 class=dd-item>
<a href=/7/36/>
36_高级特性（一）：揭秘元编程的实现机制
</a>
</li><li data-nav-id=/7/37/ title=37_高级特性（二）：揭秘泛型编程的实现机制 class=dd-item>
<a href=/7/37/>
37_高级特性（二）：揭秘泛型编程的实现机制
</a>
</li><li data-nav-id=/7/38/ title=38_综合实现（一）：如何实现面向对象编程？ class=dd-item>
<a href=/7/38/>
38_综合实现（一）：如何实现面向对象编程？
</a>
</li><li data-nav-id=/7/39/ title=39_综合实现（二）：如何实现函数式编程？ class=dd-item>
<a href=/7/39/>
39_综合实现（二）：如何实现函数式编程？
</a>
</li><li data-nav-id=/7/40/ title=40_成果检验：方舟编译器的优势在哪里？ class=dd-item>
<a href=/7/40/>
40_成果检验：方舟编译器的优势在哪里？
</a>
</li><li data-nav-id=/7/41/ title=不定期加餐1_远程办公，需要你我具备什么样的素质？ class=dd-item>
<a href=/7/41/>
不定期加餐1_远程办公，需要你我具备什么样的素质？
</a>
</li><li data-nav-id=/7/42/ title=不定期加餐2_学习技术的过程，其实是训练心理素质的过程 class=dd-item>
<a href=/7/42/>
不定期加餐2_学习技术的过程，其实是训练心理素质的过程
</a>
</li><li data-nav-id=/7/43/ title=不定期加餐3_这几年，打动我的两本好书 class=dd-item>
<a href=/7/43/>
不定期加餐3_这几年，打动我的两本好书
</a>
</li><li data-nav-id=/7/44/ title=不定期加餐4_从身边的牛人身上，我学到的一些优秀品质 class=dd-item>
<a href=/7/44/>
不定期加餐4_从身边的牛人身上，我学到的一些优秀品质
</a>
</li><li data-nav-id=/7/45/ title=不定期加餐5_借助实例，探究C++编译器的内部机制 class=dd-item>
<a href=/7/45/>
不定期加餐5_借助实例，探究C++编译器的内部机制
</a>
</li><li data-nav-id=/7/46/ title=划重点_7种编译器的核心概念与算法 class=dd-item>
<a href=/7/46/>
划重点_7种编译器的核心概念与算法
</a>
</li><li data-nav-id=/7/53/ title=学习指南_如何学习这门编译原理实战课？ class=dd-item>
<a href=/7/53/>
学习指南_如何学习这门编译原理实战课？
</a>
</li><li data-nav-id=/7/48/ title=开篇词_在真实世界的编译器中游历 class=dd-item>
<a href=/7/48/>
开篇词_在真实世界的编译器中游历
</a>
</li><li data-nav-id=/7/51/ title=期中考试_这些编译原理知识，你都掌握了吗？ class=dd-item>
<a href=/7/51/>
期中考试_这些编译原理知识，你都掌握了吗？
</a>
</li><li data-nav-id=/7/49/ title=期末答疑与总结_再次审视学习编译原理的作用 class=dd-item>
<a href=/7/49/>
期末答疑与总结_再次审视学习编译原理的作用
</a>
</li><li data-nav-id=/7/50/ title=期末考试_“编译原理实战课”100分试卷等你来挑战！ class=dd-item>
<a href=/7/50/>
期末考试_“编译原理实战课”100分试卷等你来挑战！
</a>
</li><li data-nav-id=/7/52/ title=热点问题答疑_如何吃透7种真实的编译器？ class=dd-item>
<a href=/7/52/>
热点问题答疑_如何吃透7种真实的编译器？
</a>
</li><li data-nav-id=/7/54/ title=用户故事_易昊：程序员不止有Bug和加班，还有诗和远方 class=dd-item>
<a href=/7/54/>
用户故事_易昊：程序员不止有Bug和加班，还有诗和远方
</a>
</li><li data-nav-id=/7/55/ title=知识地图_一起来复习编译技术核心概念与算法 class=dd-item>
<a href=/7/55/>
知识地图_一起来复习编译技术核心概念与算法
</a>
</li><li data-nav-id=/7/47/ title=结束语_实战是唯一标准！ class=dd-item>
<a href=/7/47/>
结束语_实战是唯一标准！
</a>
</li></ul></li><li data-nav-id=/5/ title=趣谈网络协议 class=dd-item>
<a href=/5/>
趣谈网络协议
</a>
<ul>
<li data-nav-id=/5/42/ title=加餐1_创作故事：我是如何创作“趣谈网络协议”专栏的？ class=dd-item>
<a href=/5/42/>
加餐1_创作故事：我是如何创作“趣谈网络协议”专栏的？
</a>
</li><li data-nav-id=/5/43/ title=加餐2_“趣谈网络协议”专栏食用指南 class=dd-item>
<a href=/5/43/>
加餐2_“趣谈网络协议”专栏食用指南
</a>
</li><li data-nav-id=/5/51/ title=协议专栏特别福利_答疑解惑第一期 class=dd-item>
<a href=/5/51/>
协议专栏特别福利_答疑解惑第一期
</a>
</li><li data-nav-id=/5/48/ title=协议专栏特别福利_答疑解惑第三期 class=dd-item>
<a href=/5/48/>
协议专栏特别福利_答疑解惑第三期
</a>
</li><li data-nav-id=/5/47/ title=协议专栏特别福利_答疑解惑第二期 class=dd-item>
<a href=/5/47/>
协议专栏特别福利_答疑解惑第二期
</a>
</li><li data-nav-id=/5/50/ title=协议专栏特别福利_答疑解惑第五期 class=dd-item>
<a href=/5/50/>
协议专栏特别福利_答疑解惑第五期
</a>
</li><li data-nav-id=/5/49/ title=协议专栏特别福利_答疑解惑第四期 class=dd-item>
<a href=/5/49/>
协议专栏特别福利_答疑解惑第四期
</a>
</li><li data-nav-id=/5/46/ title=开篇词_想成为技术牛人？先搞定网络协议！ class=dd-item>
<a href=/5/46/>
开篇词_想成为技术牛人？先搞定网络协议！
</a>
</li><li data-nav-id=/5/1/ title=第10讲_UDP协议：因性善而简单，难免碰到“城会玩” class=dd-item>
<a href=/5/1/>
第10讲_UDP协议：因性善而简单，难免碰到“城会玩”
</a>
</li><li data-nav-id=/5/2/ title=第11讲_TCP协议（上）：因性恶而复杂，先恶后善反轻松 class=dd-item>
<a href=/5/2/>
第11讲_TCP协议（上）：因性恶而复杂，先恶后善反轻松
</a>
</li><li data-nav-id=/5/3/ title=第12讲_TCP协议（下）：西行必定多妖孽，恒心智慧消磨难 class=dd-item>
<a href=/5/3/>
第12讲_TCP协议（下）：西行必定多妖孽，恒心智慧消磨难
</a>
</li><li data-nav-id=/5/4/ title=第13讲_套接字Socket：Talkischeap,showmethecode class=dd-item>
<a href=/5/4/>
第13讲_套接字Socket：Talkischeap,showmethecode
</a>
</li><li data-nav-id=/5/5/ title=第14讲_HTTP协议：看个新闻原来这么麻烦 class=dd-item>
<a href=/5/5/>
第14讲_HTTP协议：看个新闻原来这么麻烦
</a>
</li><li data-nav-id=/5/6/ title=第15讲_HTTPS协议：点外卖的过程原来这么复杂 class=dd-item>
<a href=/5/6/>
第15讲_HTTPS协议：点外卖的过程原来这么复杂
</a>
</li><li data-nav-id=/5/7/ title=第16讲_流媒体协议：如何在直播里看到美女帅哥？ class=dd-item>
<a href=/5/7/>
第16讲_流媒体协议：如何在直播里看到美女帅哥？
</a>
</li><li data-nav-id=/5/8/ title=第17讲_P2P协议：我下小电影，99%急死你 class=dd-item>
<a href=/5/8/>
第17讲_P2P协议：我下小电影，99%急死你
</a>
</li><li data-nav-id=/5/9/ title=第18讲_DNS协议：网络世界的地址簿 class=dd-item>
<a href=/5/9/>
第18讲_DNS协议：网络世界的地址簿
</a>
</li><li data-nav-id=/5/10/ title=第19讲_HttpDNS：网络世界的地址簿也会指错路 class=dd-item>
<a href=/5/10/>
第19讲_HttpDNS：网络世界的地址簿也会指错路
</a>
</li><li data-nav-id=/5/11/ title=第1讲_为什么要学习网络协议？ class=dd-item>
<a href=/5/11/>
第1讲_为什么要学习网络协议？
</a>
</li><li data-nav-id=/5/12/ title=第20讲_CDN：你去小卖部取过快递么？ class=dd-item>
<a href=/5/12/>
第20讲_CDN：你去小卖部取过快递么？
</a>
</li><li data-nav-id=/5/13/ title=第21讲_数据中心：我是开发商，自己拿地盖别墅 class=dd-item>
<a href=/5/13/>
第21讲_数据中心：我是开发商，自己拿地盖别墅
</a>
</li><li data-nav-id=/5/14/ title=第22讲_VPN：朝中有人好做官 class=dd-item>
<a href=/5/14/>
第22讲_VPN：朝中有人好做官
</a>
</li><li data-nav-id=/5/15/ title=第23讲_移动网络：去巴塞罗那，手机也上不了脸书 class=dd-item>
<a href=/5/15/>
第23讲_移动网络：去巴塞罗那，手机也上不了脸书
</a>
</li><li data-nav-id=/5/16/ title=第24讲_云中网络：自己拿地成本高，购买公寓更灵活 class=dd-item>
<a href=/5/16/>
第24讲_云中网络：自己拿地成本高，购买公寓更灵活
</a>
</li><li data-nav-id=/5/17/ title=第25讲_软件定义网络：共享基础设施的小区物业管理办法 class=dd-item>
<a href=/5/17/>
第25讲_软件定义网络：共享基础设施的小区物业管理办法
</a>
</li><li data-nav-id=/5/18/ title=第26讲_云中的网络安全：虽然不是土豪，也需要基本安全和保障 class=dd-item>
<a href=/5/18/>
第26讲_云中的网络安全：虽然不是土豪，也需要基本安全和保障
</a>
</li><li data-nav-id=/5/19/ title=第27讲_云中的网络QoS：邻居疯狂下电影，我该怎么办？ class=dd-item>
<a href=/5/19/>
第27讲_云中的网络QoS：邻居疯狂下电影，我该怎么办？
</a>
</li><li data-nav-id=/5/20/ title=第28讲_云中网络的隔离GRE、VXLAN：虽然住一个小区，也要保护隐私 class=dd-item>
<a href=/5/20/>
第28讲_云中网络的隔离GRE、VXLAN：虽然住一个小区，也要保护隐私
</a>
</li><li data-nav-id=/5/21/ title=第29讲_容器网络：来去自由的日子，不买公寓去合租 class=dd-item>
<a href=/5/21/>
第29讲_容器网络：来去自由的日子，不买公寓去合租
</a>
</li><li data-nav-id=/5/22/ title=第2季回归_这次我们来“趣谈Linux操作系统” class=dd-item>
<a href=/5/22/>
第2季回归_这次我们来“趣谈Linux操作系统”
</a>
</li><li data-nav-id=/5/23/ title=第2讲_网络分层的真实含义是什么？ class=dd-item>
<a href=/5/23/>
第2讲_网络分层的真实含义是什么？
</a>
</li><li data-nav-id=/5/24/ title=第30讲_容器网络之Flannel：每人一亩三分地 class=dd-item>
<a href=/5/24/>
第30讲_容器网络之Flannel：每人一亩三分地
</a>
</li><li data-nav-id=/5/25/ title=第31讲_容器网络之Calico：为高效说出善意的谎言 class=dd-item>
<a href=/5/25/>
第31讲_容器网络之Calico：为高效说出善意的谎言
</a>
</li><li data-nav-id=/5/26/ title=第32讲_RPC协议综述：远在天边，近在眼前 class=dd-item>
<a href=/5/26/>
第32讲_RPC协议综述：远在天边，近在眼前
</a>
</li><li data-nav-id=/5/27/ title=第33讲_基于XML的SOAP协议：不要说NBA，请说美国职业篮球联赛 class=dd-item>
<a href=/5/27/>
第33讲_基于XML的SOAP协议：不要说NBA，请说美国职业篮球联赛
</a>
</li><li data-nav-id=/5/28/ title=第34讲_基于JSON的RESTful接口协议：我不关心过程，请给我结果 class=dd-item>
<a href=/5/28/>
第34讲_基于JSON的RESTful接口协议：我不关心过程，请给我结果
</a>
</li><li data-nav-id=/5/29/ title=第35讲_二进制类RPC协议：还是叫NBA吧，总说全称多费劲 class=dd-item>
<a href=/5/29/>
第35讲_二进制类RPC协议：还是叫NBA吧，总说全称多费劲
</a>
</li><li data-nav-id=/5/30/ title=第36讲_跨语言类RPC协议：交流之前，双方先来个专业术语表 class=dd-item>
<a href=/5/30/>
第36讲_跨语言类RPC协议：交流之前，双方先来个专业术语表
</a>
</li><li data-nav-id=/5/31/ title=第37讲_知识串讲：用双十一的故事串起碎片的网络协议（上） class=dd-item>
<a href=/5/31/>
第37讲_知识串讲：用双十一的故事串起碎片的网络协议（上）
</a>
</li><li data-nav-id=/5/32/ title=第38讲_知识串讲：用双十一的故事串起碎片的网络协议（中） class=dd-item>
<a href=/5/32/>
第38讲_知识串讲：用双十一的故事串起碎片的网络协议（中）
</a>
</li><li data-nav-id=/5/33/ title=第39讲_知识串讲：用双十一的故事串起碎片的网络协议（下） class=dd-item>
<a href=/5/33/>
第39讲_知识串讲：用双十一的故事串起碎片的网络协议（下）
</a>
</li><li data-nav-id=/5/34/ title=第3讲_ifconfig：最熟悉又陌生的命令行 class=dd-item>
<a href=/5/34/>
第3讲_ifconfig：最熟悉又陌生的命令行
</a>
</li><li data-nav-id=/5/35/ title=第40讲_搭建一个网络实验环境：授人以鱼不如授人以渔 class=dd-item>
<a href=/5/35/>
第40讲_搭建一个网络实验环境：授人以鱼不如授人以渔
</a>
</li><li data-nav-id=/5/36/ title=第4讲_DHCP与PXE：IP是怎么来的，又是怎么没的？ class=dd-item>
<a href=/5/36/>
第4讲_DHCP与PXE：IP是怎么来的，又是怎么没的？
</a>
</li><li data-nav-id=/5/37/ title=第5讲_从物理层到MAC层：如何在宿舍里自己组网玩联机游戏？ class=dd-item>
<a href=/5/37/>
第5讲_从物理层到MAC层：如何在宿舍里自己组网玩联机游戏？
</a>
</li><li data-nav-id=/5/38/ title=第6讲_交换机与VLAN：办公室太复杂，我要回学校 class=dd-item>
<a href=/5/38/>
第6讲_交换机与VLAN：办公室太复杂，我要回学校
</a>
</li><li data-nav-id=/5/39/ title=第7讲_ICMP与ping：投石问路的侦察兵 class=dd-item>
<a href=/5/39/>
第7讲_ICMP与ping：投石问路的侦察兵
</a>
</li><li data-nav-id=/5/40/ title=第8讲_世界这么大，我想出网关：欧洲十国游与玄奘西行 class=dd-item>
<a href=/5/40/>
第8讲_世界这么大，我想出网关：欧洲十国游与玄奘西行
</a>
</li><li data-nav-id=/5/41/ title=第9讲_路由协议：西出网关无故人，敢问路在何方 class=dd-item>
<a href=/5/41/>
第9讲_路由协议：西出网关无故人，敢问路在何方
</a>
</li><li data-nav-id=/5/45/ title=结束语_放弃完美主义，执行力就是限时限量认真完成 class=dd-item>
<a href=/5/45/>
结束语_放弃完美主义，执行力就是限时限量认真完成
</a>
</li><li data-nav-id=/5/44/ title=结课测试_这些网络协议你都掌握了吗？ class=dd-item>
<a href=/5/44/>
结课测试_这些网络协议你都掌握了吗？
</a>
</li></ul></li></ul><section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body>
<div id=overlay></div><div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=/>Gen 的学习笔记</a> > <a href=/9/>操作系统实战45讲</a> > 08_锁：并发操作中，解决数据同步的四种方法
</span>
</div><div class=progress>
<div class=wrapper>
<nav id=TableOfContents></nav></div></div></div></div><div id=head-tags>
</div><div id=body-inner>
<h1>
08_锁：并发操作中，解决数据同步的四种方法
</h1><p><audio title="08 _ 锁：并发操作中，解决数据同步的四种方法" src=https://static001.geekbang.org/resource/audio/e8/b6/e81c8658ca5db24f4864c2024ee4c6b6.mp3 controls></audio></p><p>你好，我是LMOS。</p><p>我们在前面的课程中探索了，开发操作系统要了解的最核心的硬件——CPU、MMU、Cache、内存，知道了它们的工作原理。在程序运行中，它们起到了至关重要的作用。</p><p>在开发我们自己的操作系统以前，还不能一开始就把机器跑起来，而是先要弄清楚数据同步的问题。如果不解决掉数据同步的问题，后面机器跑起来，就会出现很多不可预知的结果。</p><p>通过这节课，我会给你讲清楚为什么在并发操作里，很可能得不到预期的访问数据，还会带你分析这个问题的原因以及解决方法。有了这样一个研究、解决问题的过程，对最重要的几种锁（<strong>原子变量，关中断，信号量，自旋锁</strong>），你就能做到心中有数了。</p><h2>非预期结果的全局变量</h2><p>来看看下面的代码，描述的是一个线程中的函数和中断处理函数，它们分别对一个全局变量执行加1操作，代码如下。</p><pre><code>int a = 0;
void interrupt_handle()
{
    a++;
}
void thread_func()
{
    a++;
}
<p></code></pre><p>首先我们梳理一下编译器的翻译过程，通常编译器会把a++语句翻译成这3条指令。</p><p>1.把a加载某个寄存器中。</p><p>2.这个寄存器加1。</p><p>3.把这个寄存器写回内存。</p><p>那么不难推断，可能导致结果不确定的情况是这样的：thread_func函数还没运行完第2条指令时，中断就来了。</p><p>因此，CPU转而处理中断，也就是开始运行interrupt_handle函数，这个函数运行完a=1，CPU还会回去继续运行第3条指令，此时a依然是1，这显然是错的。</p>&lt;!&ndash; [[[read_end]]] &ndash;><p>下面来看一下表格，你就明白了。<br>
<img src="https://static001.geekbang.org/resource/image/79/4c/79bfa1d036ebb27yy17ae3edf768ba4c.jpeg?wh=1920*1080" alt></p><p>显然在t2时刻发生了中断，导致了t2到t4运行了interrupt_handle函数，t5时刻thread_func又恢复运行，导致interrupt_handle函数中a的操作丢失，因此出错。</p><h2>方法一：原子操作 拿下单体变量</h2><p>要解决上述场景中的问题，有这样两种思路。一种是<strong>把a++变成原子操作</strong>，这里的原子是不可分隔的，也就是说要a++这个操作不可分隔，即a++要么不执行，要么一口气执行完；另一种就是<strong>控制中断</strong>，比如在执行a++之前关掉中断，执行完了之后打开中断。</p><p>我们先来看看原子操作，显然靠编译器自动生成原子操作不太可能。第一，编译器没有这么智能，能检测哪个变量需要原子操作；第二，编译器必须要考虑代码的移植性，例如有些硬件平台支持原子操作的机器指令，有的硬件平台不支持原子操作。</p><p>既然实现原子操作无法依赖于具体编译器，那就需要我们自己动手，x86平台支持很多原子指令，我们只需要直接应用这些指令，比如原子加、原子减，原子读写等，用汇编代码写出对应的原子操作函数就行了。</p><p>好在现代C语言已经支持嵌入汇编代码，可以<strong>在C函数中按照特定的方式嵌入汇编代码</strong>了，实现原子操作就更方便了，代码如下。</p><pre><code>//定义一个原子类型
typedef struct s_ATOMIC{
volatile s32_t a_count; //在变量前加上volatile，是为了禁止编译器优化，使其每次都从内存中加载变量
}atomic_t;
//原子读
static inline s32_t atomic_read(const atomic_t <em>v)
{     <br>
//x86平台取地址处是原子
return (</em>(volatile u32_t*)&amp;(v)-&gt;a_count);
}
//原子写
static inline void atomic_write(atomic_t *v, int i)
{
//x86平台把一个值写入一个地址处也是原子的
v-&gt;a_count = i;
}
//原子加上一个整数
static inline void atomic_add(int i, atomic_t *v)
{
<strong>asm</strong> <strong>volatile</strong>(&quot;lock;&quot; &quot;addl %1,%0&quot;
: &quot;+m&quot; (v-&gt;a_count)
: &quot;ir&quot; (i));
}
//原子减去一个整数
static inline void atomic_sub(int i, atomic_t *v)
{
<strong>asm</strong> <strong>volatile</strong>(&quot;lock;&quot; &quot;subl %1,%0&quot;
: &quot;+m&quot; (v-&gt;a_count)
: &quot;ir&quot; (i));
}
//原子加1
static inline void atomic_inc(atomic_t *v)
{
<strong>asm</strong> <strong>volatile</strong>(&quot;lock;&quot; &quot;incl %0&quot;
: &quot;+m&quot; (v-&gt;a_count));
}
//原子减1
static inline void atomic_dec(atomic_t *v)
{
<strong>asm</strong> <strong>volatile</strong>(&quot;lock;&quot; &quot;decl %0&quot;
: &quot;+m&quot; (v-&gt;a_count));
}</p>
<p></code></pre><p><strong>以上代码中，加上lock前缀的addl、subl、incl、decl指令都是原子操作，lock前缀表示锁定总线。</strong></p><p>我们还是来看看GCC支持嵌入汇编代码的模板，不同于其它C编译器支持嵌入汇编代码的方式，为了优化用户代码，GCC设计了一种特有的嵌入方式，它规定了汇编代码嵌入的形式和嵌入汇编代码需要由哪几个部分组成，如下面代码所示。</p><pre><code><strong>asm</strong> <strong>volatile</strong>(代码部分:输出部分列表: 输入部分列表:损坏部分列表);
</code></pre><p>可以看到代码模板从__asm__开始（当然也可以是asm），紧跟着__volatile__，然后是跟着一对括号，最后以分号结束。括号里大致分为4个部分：</p><p>1.汇编代码部分，这里是实际嵌入的汇编代码。</p><p>2.输出列表部分，让GCC能够处理C语言左值表达式与汇编代码的结合。</p><p>3.输入列表部分，也是让GCC能够处理C语言表达式、变量、常量，让它们能够输入到汇编代码中去。</p><p>4.损坏列表部分，告诉GCC汇编代码中用到了哪些寄存器，以便GCC在汇编代码运行前，生成保存它们的代码，并且在生成的汇编代码运行后，恢复它们（寄存器）的代码。</p><p>它们之间用冒号隔开，如果只有汇编代码部分，后面的冒号可以省略。但是有输入列表部分而没有输出列表部分的时候，输出列表部分的冒号就必须要写，否则GCC没办法判断，同样的道理对于其它部分也一样。</p><p>这里不会过多展开讲这个技术，详情可参阅<a href=https://www.gnu.org/manual/manual.html>GCC手册</a>。你可以重点看GAS相关的章节。</p><p>下面将用上面一个函数atomic_add为例子说一下，如下所示。</p><pre><code>static inline void atomic_add(int i, atomic_t <em>v)
{
<strong>asm</strong> <strong>volatile</strong>(&quot;lock;&quot; &quot;addl %1,%0&quot;
: &quot;+m&quot; (v-&gt;a_count)
: &quot;ir&quot; (i));
}
//&quot;lock;&quot; &quot;addl %1,%0&quot; 是汇编指令部分，%1,%0是占位符，它表示输出、输入列表中变量或表态式，占位符的数字从输出部分开始依次增加，这些变量或者表态式会被GCC处理成寄存器、内存、立即数放在指令中。
//: &quot;+m&quot; (v-&gt;a_count) 是输出列表部分，“+m”表示(v-&gt;a_count)和内存地址关联
//: &quot;ir&quot; (i) 是输入列表部分，“ir” 表示i是和立即数或者寄存器关联
</code></pre><p>有了这些原子操作函数之后 ，前面场景中的代码就变成下面这样了：无论有没有中断，或者什么时间来中断，都不会出错。</p><pre><code>atomic_t a = {0};
void interrupt_handle()
{
atomic_inc(&amp;a);
}
void thread_func()
{
atomic_inc(&amp;a);
}
</code></pre><p>好，说完了原子操作，我们再看看怎么用中断控制的思路解决数据并发访问的问题。</p><h2>方法二：中断控制 搞定复杂变量</h2><p>中断是CPU响应外部事件的重要机制，时钟、键盘、硬盘等IO设备都是通过发出中断来请求CPU执行相关操作的（即执行相应的中断处理代码），比如下一个时钟到来、用户按下了键盘上的某个按键、硬盘已经准备好了数据。</p><p>但是中断处理代码中如果操作了其它代码的数据，这就需要相应的控制机制了，这样才能保证在操作数据过程中不发生中断。</p><p>你或许在想，可以用原子操作啊？不过，<strong>原子操作只适合于单体变量</strong>，如整数。操作系统的数据结构有的可能有几百字节大小，其中可能包含多种不同的基本数据类型。这显然用原子操作无法解决。</p><p>下面，我们就要写代码实现关闭开启、中断了，x86 CPU上关闭、开启中断有专门的指令，即cli、sti指令，它们主要是对CPU的eflags寄存器的<strong>IF位</strong>（第9位）进行清除和设置，CPU正是通过此位来决定是否响应中断信号。这两条指令只能Ring0权限才能执行，代码如下。</p><pre><code>//关闭中断
void hal_cli()
{
<strong>asm</strong> <strong>volatile</strong>(&quot;cli&quot;: : :&quot;memory&quot;);
}
//开启中断
void hal_sti()
{
<strong>asm</strong> <strong>volatile</strong>(&quot;sti&quot;: : :&quot;memory&quot;);
}
//使用场景
void foo()
{
hal_cli();
//操作数据……
hal_sti();
}
void bar()
{
hal_cli();
//操作数据……
hal_sti();
}
</code></pre><p>你可以自己思考一下，前面这段代码效果如何？</p><p>它看似完美地解决了问题，其实有重大缺陷，hal_cli()，hal_sti()，<strong>无法嵌套使用</strong>，看一个例子你就明白了，代码如下。</p><pre><code>void foo()
{
hal_cli();
//操作数据第一步……
hal_sti();
}
void bar()
{
hal_cli();
foo();
//操作数据第二步……
hal_sti();
}
</code></pre><p>上面代码的关键问题在bar函数在关中断下调用了foo函数，foo函数中先关掉中断，处理好数据然后开启中断，回到bar函数中，bar函数还天真地以为中断是关闭的，接着处理数据，以为不会被中断抢占。</p><p>那么怎么解决上面的问题呢？我们只要修改一下开启、关闭中断的函数就行了。</p><p>我们可以这样操作：在关闭中断函数中先保存eflags寄存器，然后执行cli指令，在开启中断函数中直接恢复之前保存的eflags寄存器就行了，具体代码如下。</p><pre><code>typedef u32_t cpuflg_t;
static inline void hal_save_flags_cli(cpuflg_t</em> flags)
{
<strong>asm</strong> <strong>volatile</strong>(
&quot;pushfl \t\n&quot; //把eflags寄存器压入当前栈顶
&quot;cli    \t\n&quot; //关闭中断
&quot;popl %0 \t\n&quot;//把当前栈顶弹出到eflags为地址的内存中     <br>
: &quot;=m&quot;(<em>flags)
:
: &quot;memory&quot;
);
}
static inline void hal_restore_flags_sti(cpuflg_t</em> flags)
{
<strong>asm</strong> <strong>volatile</strong>(
&quot;pushl %0 \t\n&quot;//把flags为地址处的值寄存器压入当前栈顶
&quot;popfl \t\n&quot;   //把当前栈顶弹出到eflags寄存器中
:
: &quot;m&quot;(*flags)
: &quot;memory&quot;
);
}
</code></pre><p>从上面的代码中不难发现，硬件工程师早就想到了如何解决在嵌套函数中关闭、开启中断的问题：pushfl指令把eflags寄存器压入当前栈顶，popfl把当前栈顶的数据弹出到eflags寄存器中。</p><p>hal_restore_flags_sti()函数的执行，是否开启中断完全取决于上一次eflags寄存器中的值，并且popfl指令只会影响eflags寄存器中的IF位。这样，无论函数嵌套调用多少层都没有问题。</p><h2>方法三：自旋锁 协调多核心CPU</h2><p>前面说的控制中断，看似解决了问题，那是因为以前是单CPU，同一时刻只有一条代码执行流，除了中断会中止当前代码执行流，转而运行另一条代码执行流（中断处理程序），再无其它代码执行流。这种情况下只要控制了中断，就能安全地操作全局数据。</p><p>但是我们都知道，现在情况发生了改变，CPU变成了多核心，或者主板上安装了多颗CPU，同一时刻下系统中存在多条代码执行流，控制中断只能控制本地CPU的中断，无法控制其它CPU核心的中断。</p><p>所以，原先通过控制中断来维护全局数据安全的方案失效了，这就需要全新的机制来处理这样的情况，于是就轮到自旋锁登场了。</p><p>我们先看看自旋锁的原理，它是这样的：首先读取锁变量，判断其值是否已经加锁，如果未加锁则执行加锁，然后返回，表示加锁成功；如果已经加锁了，就要返回第一步继续执行后续步骤，因而得名自旋锁。为了让你更好理解，下面来画一个图描述这个算法。</p><p><img src="https://static001.geekbang.org/resource/image/61/88/619c27c6400344db2310fb82ce8d5788.jpg?wh=2195*2405" alt title=自旋锁原理示意图></p><p>这个算法看似很好，但是想要正确执行它，就<strong>必须保证读取锁变量和判断并加锁的操作是原子执行的。</strong>否则，CPU0在读取了锁变量之后，CPU1读取锁变量判断未加锁执行加锁，然后CPU0也判断未加锁执行加锁，这时就会发现两个CPU都加锁成功，因此这个算法出错了。</p><p>怎么解决这个问题呢？这就要找硬件要解决方案了，x86 CPU给我们提供了一个原子交换指令，xchg，它可以让寄存器里的一个值跟内存空间中的一个值做交换。例如，让eax=memlock，memlock=eax这个动作是原子的，不受其它CPU干扰。</p><p>下面我们就去实现自旋锁，代码如下所示。</p><pre><code>//自旋锁结构
typedef struct
{
volatile u32_t lock;//volatile可以防止编译器优化，保证其它代码始终从内存加载lock变量的值
} spinlock_t;
//锁初始化函数
static inline void x86_spin_lock_init(spinlock_t * lock)
{
lock-&gt;lock = 0;//锁值初始化为0是未加锁状态
}
//加锁函数
static inline void x86_spin_lock(spinlock_t * lock)
{
<strong>asm</strong> <strong>volatile</strong> (
&quot;1: \n&quot;
&quot;lock; xchg  %0, %1 \n&quot;//把值为1的寄存器和lock内存中的值进行交换
&quot;cmpl   $0, %0 \n&quot; //用0和交换回来的值进行比较
&quot;jnz    2f \n&quot;  //不等于0则跳转后面2标号处运行
&quot;jmp 3f \n&quot;     //若等于0则跳转后面3标号处返回
&quot;2:         \n&quot;
&quot;cmpl   $0, %1  \n&quot;//用0和lock内存中的值进行比较
&quot;jne    2b      \n&quot;//若不等于0则跳转到前面2标号处运行继续比较<br>
&quot;jmp    1b      \n&quot;//若等于0则跳转到前面1标号处运行，交换并加锁
&quot;3:  \n&quot;     :
: &quot;r&quot;(1), &quot;m&quot;(*lock));
}
//解锁函数
static inline void x86_spin_unlock(spinlock_t * lock)
{
<strong>asm</strong> <strong>volatile</strong>(
&quot;movl   $0, %0\n&quot;//解锁把lock内存中的值设为0就行
:
: &quot;m&quot;(*lock));
}
</code></pre><p>上述代码的中注释已经很清楚了，关键点在于xchg指令，xchg %0, %1 。</p><p>其中，%0对应 “r”(1)，表示由编译器自动分配一个通用寄存器，并填入值1，例如mov eax，1。而%1对应"m"(<em>lock)，表示lock是内存地址。把1和内存中的值进行交换，若内存中是1，则不会影响；因为本身写入就是1，若内存中是0，一交换，内存中就变成了1，即加锁成功。</p><p>自旋锁依然有中断嵌套的问题，也就是说，在使用自旋锁的时候我们仍然要注意中断。</p><p>在中断处理程序访问某个自旋锁保护的某个资源时，依然有问题，所以我们要写的自旋锁函数必须适应这样的中断环境，也就是说，它需要在处理中断的过程中也能使用，如下所示。</p><pre><code>static inline void x86_spin_lock_disable_irq(spinlock_t * lock,cpuflg_t</em> flags)
{
<strong>asm</strong> <strong>volatile</strong>(
&quot;pushfq                 \n\t&quot;
&quot;cli                    \n\t&quot;
&quot;popq %0                \n\t&quot;
&quot;1:         \n\t&quot;
&quot;lock; xchg  %1, %2 \n\t&quot;
&quot;cmpl   $0,%1       \n\t&quot;
&quot;jnz    2f      \n\t&quot;
&quot;jmp    3f      \n&quot;<br>
&quot;2:         \n\t&quot;
&quot;cmpl   $0,%2       \n\t&quot;
&quot;jne    2b      \n\t&quot;
&quot;jmp    1b      \n\t&quot;
&quot;3:     \n&quot;  <br>
:&quot;=m&quot;(<em>flags)
: &quot;r&quot;(1), &quot;m&quot;(<em>lock));
}
static inline void x86_spin_unlock_enabled_irq(spinlock_t</em> lock,cpuflg_t</em> flags)
{
<strong>asm</strong> <strong>volatile</strong>(
&quot;movl   $0, %0\n\t&quot;
&quot;pushq %1 \n\t&quot;
&quot;popfq \n\t&quot;
:
: &quot;m&quot;(<em>lock), &quot;m&quot;(<em>flags));
}
</code></pre><p>以上代码实现了关中断下获取自旋锁，以及恢复中断状态释放自旋锁。在中断环境下也完美地解决了问题。</p><h2>方法四：信号量 CPU时间管理大师</h2><p>无论是原子操作，还是自旋锁，都不适合长时间等待的情况，因为有很多资源（数据）它有一定的时间性，你想去获取它，CPU并不能立即返回给你，而是要等待一段时间，才能把数据返回给你。这种情况，你用自旋锁来同步访问这种资源，你会发现这是对CPU时间的巨大浪费。</p><p>下面我们看看另一种同步机制，既能对资源数据进行保护（同一时刻只有一个代码执行流访问），又能在资源无法满足的情况下，让CPU可以执行其它任务。</p><p>如果你翻过操作系统的理论书，应该对信号量这个词并不陌生。信号量是1965年荷兰学者Edsger Dijkstra提出的，是一种用于资源互斥或者进程间同步的机制。这里我们就来看看如何实现这一机制。</p><p>你不妨想象这样一个情境：微信等待你从键盘上的输入信息，然后把这个信息发送出去。</p><p>这个功能我们怎么实现呢？下面我们就来说说实现它的一般方法，当然具体实现中可能不同，但是原理是相通的，具体如下。</p><p>1.一块内存，相当于缓冲区，用于保存键盘的按键码。</p><p>2.需要一套控制机制，比如微信读取这个缓冲区，而该缓冲区为空时怎么处理；该缓冲区中有了按键码，却没有代码执行流来读取，又该怎么处理。</p><p>我们期望是这样的，一共有三点。</p><p>1.当微信获取键盘输入信息时，发现键盘缓冲区中是空的，就进入等待状态。</p><p>2.同一时刻，只能有一个代码执行流操作键盘缓冲区。</p><p>3.当用户按下键盘时，我们有能力把按键码写入缓冲区中，并且能看一看微信或者其它程序是否在等待该缓冲区，如果是就重新激活微信和其它的程序，让它们重新竞争读取键盘缓冲区，如果竞争失败依然进入等待状态。</p><p>其实以上所述无非是三个问题：<strong>等待、互斥、唤醒（即重新激活等待的代码执行流）。</strong></p><p>这就需要一种全新的数据结构来解决这些问题。根据上面的问题，这个数据结构至少需要一个变量来表示互斥，比如大于0则代码执行流可以继续运行，等于0则让代码执行流进入等待状态。还需要一个等待链，用于保存等待的代码执行流。</p><p>这个数据结构的实现代码如下所示。</p><pre><code>#define SEM_FLG_MUTEX 0
#define SEM_FLG_MULTI 1
#define SEM_MUTEX_ONE_LOCK 1
#define SEM_MULTI_LOCK 0
//等待链数据结构，用于挂载等待代码执行流（线程）的结构，里面有用于挂载代码执行流的链表和计数器变量，这里我们先不深入研究这个数据结构。
typedef struct s_KWLST
{<br>
spinlock_t wl_lock;
uint_t   wl_tdnr;
list_h_t wl_list;
}kwlst_t;
//信号量数据结构
typedef struct s_SEM
{
spinlock_t sem_lock;//维护sem_t自身数据的自旋锁
uint_t sem_flg;//信号量相关的标志
sint_t sem_count;//信号量计数值
kwlst_t sem_waitlst;//用于挂载等待代码执行流（线程）结构
}sem_t;
</code></pre><p>搞懂了信号量的结构，我们再来看看信号量的一般用法，注意信号量在使用之前需要<strong>先进行初始化</strong>。这里假定信号量数据结构中的sem_count初始化为1，sem_waitlst等待链初始化为空。</p><p>使用信号量的步骤，我已经给你列好了。</p><p><strong>第一步，获取信号量。</strong></p><p>1.首先对用于保护信号量自身的自旋锁sem_lock进行加锁。<br>
2.对信号值sem_count执行“减1”操作，并检查其值是否小于0。<br>
3.上步中检查sem_count如果小于0，就让进程进入等待状态并且将其挂入sem_waitlst中，然后调度其它进程运行。否则表示获取信号量成功。当然最后别忘了对自旋锁sem_lock进行解锁。</p><p><strong>第二步，代码执行流开始执行相关操作，例如读取键盘缓冲区。</strong></p><p><strong>第三步，释放信号量。</strong></p><p>1.首先对用于保护信号量自身的自旋锁sem_lock进行加锁。<br>
2.对信号值sem_count执行“加1”操作，并检查其值是否大于0。<br>
3.上步中检查sem_count值如果大于0，就执行唤醒sem_waitlst中进程的操作，并且需要调度进程时就执行进程调度操作，不管sem_count是否大于0（通常会大于0）都标记信号量释放成功。当然最后别忘了对自旋锁sem_lock进行解锁。</p><p>这里我给你额外分享一个小技巧，<strong>写代码之前我们常常需要先想清楚算法步骤，建议你像我这样分条列出，因为串联很容易含糊其辞，不利于后面顺畅编码。</strong></p><p>好，下面我们来看看实现上述这些功能的代码，按照理论书籍上说，信号量有两个操作：down，up，代码如下。</p><pre><code>//获取信号量
void krlsem_down(sem_t</em> sem)
{
cpuflg_t cpufg;
start_step: <br>
krlspinlock_cli(&amp;sem-&gt;sem_lock,&amp;cpufg);
if(sem-&gt;sem_count&lt;1)
{//如果信号量值小于1,则让代码执行流（线程）睡眠
krlwlst_wait(&amp;sem-&gt;sem_waitlst);
krlspinunlock_sti(&amp;sem-&gt;sem_lock,&amp;cpufg);
krlschedul();//切换代码执行流，下次恢复执行时依然从下一行开始执行，所以要goto开始处重新获取信号量
goto start_step;
}
sem-&gt;sem_count&ndash;;//信号量值减1,表示成功获取信号量
krlspinunlock_sti(&amp;sem-&gt;sem_lock,&amp;cpufg);
return;
}
//释放信号量
void krlsem_up(sem_t</em> sem)
{
cpuflg_t cpufg;
krlspinlock_cli(&amp;sem-&gt;sem_lock,&amp;cpufg);
sem-&gt;sem_count++;//释放信号量
if(sem-&gt;sem_count&lt;1)
{//如果小于1,则说数据结构出错了，挂起系统
krlspinunlock_sti(&amp;sem-&gt;sem_lock,&amp;cpufg);
hal_sysdie(&quot;sem up err&quot;);
}
//唤醒该信号量上所有等待的代码执行流（线程）
krlwlst_allup(&amp;sem-&gt;sem_waitlst);
krlspinunlock_sti(&amp;sem-&gt;sem_lock,&amp;cpufg);
krlsched_set_schedflgs();
return;
}
</code></pre><p>上述代码中的krlspinlock_cli，krlspinunlock_sti两个函数，只是对前面自旋锁函数的一个<strong>封装</strong>，krlschedul、krlwlst_wait、krlwlst_allup、krlsched_set_schedflgs这几个函数会在进程相关课程进行探讨。</p><h2>重点回顾</h2><p>又到了这节课结束的时候，我们回顾一下今天都讲了什么。我把这节课的内容为你梳理一下，要点如下。</p><p>1.原子变量，在只有<strong>单个变量全局数据</strong>的情况下，这种变量非常实用，如全局计数器、状态标志变量等。我们利用了CPU的原子指令实现了一组操作原子变量的函数。</p><p>2.中断的控制。当要操作的数据很多的情况下，用原子变量就不适合了。但是我们发现在单核心的CPU，同一时刻只有一个代码执行流，除了响应中断导致代码执行流切换，不会有其它条件会干扰全局数据的操作，所以我们只要在操作全局数据时关闭或者开启中断就行了，为此我们开发了控制中断的函数。</p><p>3.自旋锁。由于多核心的CPU出现，控制中断已经失效了，因为<strong>系统中同时有多个代码执行流</strong>，为了解决这个问题，我们开发了自旋锁，自旋锁要么一下子获取锁，要么循环等待最终获取锁。</p><p>4.信号量。如果长时间等待后才能获取数据，在这样的情况下，前面中断控制和自旋锁都不能很好地解决，于是我们开发了信号量。信号量由一套数据结构和函数组成，它能使获取数据的代码执行流进入睡眠，然后在相关条件满足时被唤醒，这样就能让CPU能有时间处理其它任务。所以信号量同时解决了三个问题：<strong>等待、互斥、唤醒。</strong></p><h2>思考题</h2><p>请用代码展示一下自旋锁或者信号量，可能的使用形式是什么样的？</p><p>期待你在留言区的分享，也欢迎你把这节课的内容分享给身边的朋友，跟他一起学习交流。</p><p>我是LMOS，我们下节课见！</p></p><style>ul{list-style:none;display:block;list-style-type:disc;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0;margin-inline-end:0;padding-inline-start:40px}li{display:list-item;text-align:-webkit-match-parent}._2sjJGcOH_0{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-top:26px;border-bottom:1px solid rgba(233,233,233,.6)}._2sjJGcOH_0 ._3FLYR4bF_0{width:34px;height:34px;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}._2sjJGcOH_0 ._36ChpWj4_0{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding-bottom:20px}._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0{font-size:16px;color:#3d464d;font-weight:500;-webkit-font-smoothing:antialiased;line-height:34px}._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0{margin-top:12px;color:#505050;-webkit-font-smoothing:antialiased;font-size:14px;font-weight:400;white-space:normal;word-break:break-all;line-height:24px}._2sjJGcOH_0 ._10o3OAxT_0{margin-top:18px;border-radius:4px;background-color:#f6f7fb}._2sjJGcOH_0 ._3klNVc4Z_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:15px}._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0{color:#505050;-webkit-font-smoothing:antialiased;font-size:14px;font-weight:400;white-space:normal;word-break:break-word;padding:20px 20px 20px 24px}._2sjJGcOH_0 ._3klNVc4Z_0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:15px}._2sjJGcOH_0 ._3Hkula0k_0{color:#b2b2b2;font-size:14px}</style><ul><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>pedro</span>
</div><div class=_2_QraFYR_0>今天的专栏可谓是精彩至极！<br>锁是解决并发同步问题的关键，从本文来看，锁有两个核心点，一个是原子操作，另一个则是中断；<br>通过原子操作来实现临界区标志位的改变，关闭中断来避免CPU中途离开导致数据同步失败问题。<br>自旋锁(spinlock)是锁的最小原型，其它锁都是以它为基础来实现的，自旋锁的实现也颇为简单，只需一个简单的原子标志位就可以实现了，当然还要妥善管理中断。<br>在 xv6 中，对锁的实现只有两种，一种是刚才提到的 spinlock，而另外一种则是 sleeplock，spinlock 不会让出 CPU 执行权，而 sleeplock 则是在 spinlock 的基础上，增加 sleep 功能，即如果一个执行体(线程或者进程)加锁失败，就会进入休眠状态，让出 CPU 执行权，让其它的任务也能得以执行。<br>本文中的信号量(sem)也是 sleeplock 的一种，sem 的实现更为精致，通过等待队列来记录加锁失败的执行体，并后续通过一定的策略来选择唤醒，这也是很多编程语言中信号量的实现方式。<br>当然不同的语言会有不同的优化，比如 go 的 Mutex 是非公平的唤醒机制，但是针对非公平的场景，又设有饥饿补偿，总之本文中实现的 sem 几乎是任何信号量（锁）实现的基础蓝本。<br><br>对于思考题答案，这里就顺便贴一下吧，如果有啥问题，欢迎大家交流指正：<br> spinlock_t lock;<br> x86_spin_lock_init(&lock);<br> // 加锁，如果加锁成功则进入下面代码执行<br> // 否则，一直自旋，不断检查 lock 值为否为 0<br> x86_spin_lock_disable_irq(&lock);<br> // 处理一些数据同步、协同场景<br> doing_something();<br> // 解锁<br> x86_spin_unlock_enabled_irq(&lock);<br><br><br> sem_t sem;<br> x86_sem_init(&sem);<br> // 加锁，减少信号量，如果信号量已经为 0<br> // 则加锁失败，当前线程会改变为 sleeping 状态<br> // 并让出 CPU 执行权<br> krlsem_down(&sem);<br> // 处理一些数据同步、协同场景<br> doing_something();<br> // 解锁，增加信号量，唤醒等待队列中的其它线程（若存在）<br> krlsem_up(&sem);<br></div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 我非常喜欢你这样的读者，你总是能抓住问题的本质，继续保持，为你点赞</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-26 08:46:57</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>neohope</span>
</div><div class=_2_QraFYR_0>当前版本还有几个问题还没有解决，希望后面课程有进一步详解：<br>1、跨用户进程时，如何共享内核的同一个锁或信号量<br>2、没有提供锁的可重入不可重入的限制<br>3、锁自旋时不会让渡CPU时间<br>4、暂时没有提供公平锁算法<br>5、暂时没有提供乐观锁算法<br><br>基于本节，其实大家可以尝试一下：<br>1、信号量如何提供最大资源数限制<br>2、信号量如何提供扣除多个资源的支持<br>3、如何实现互斥量这一类数据结构呢<br>4、如何实现读写锁这一类数据结构呢<br><br>锁一般用来做线程间或进程间的互斥操作<br>信号量一般用来做线程间或进程间资源同步操作，比如资源的占用和释放等</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 是的，我们后面会有介绍 的 </p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-26 14:41:27</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>嗣树</span>
</div><div class=_2_QraFYR_0>记录下我学习本节内容的一些思考：<br>1. 学习到这里还没有引入抢占这个概念，所以讨论环境中默认进程上下文不会发生抢占，同样也没有进程切换这些东西。<br>其实讲进程上下文也不对，我们都还没有引入这些东西，暂且凑合这么用吧。<br><br>2. 首先讨论了单 cpu 情况下，保证数据一致性的方式，这一时期我们主要防中断：<br> - 对于单个变量我们实现了原子变量（由硬件提供支持），中断是不能打断这个操作的<br> - 对于复杂变量的操作，这个时候中断可以乱入了，我们通过关中断来保证单 cpu 下这些数据的正确<br><br>3. 到了多 cpu 时代，不止有中断这个小三，还有隔壁老王（其他核），关中断已经不管用了，<br>为了数据的一致需要大家在操作前都走自旋流程，自旋需要新的原子操作支持（xchg），到此我们解决了老王带来的问题。<br><br>4. 但是我们还需要面对中断的问题，自旋锁的实现是带条件的死循环，这也引入了一个问题：死锁。<br>cpu 间的互相抢锁最多抢不到等一会，但是 cpu 和本地中断之间就不同了。<br><br>当本 cpu 占有了锁，此时打来中断，假如中断中也要抢这把锁，那他抢不到嘛，只好死给你看咯。<br>而中断也可以嵌套，这种情况也可能死。所以对自旋锁升级，添加了关中断的操作。<br><br>5. 最后老师介绍了信号量，这里其实已经带入了调度的概念。<br><br>6. 最后在思考一下抢占和中断优先级带来的问题，其实也还是死锁的问题。<br>上面我们设想了两种死锁的情况。我们泛化一下，其实中断可以看作比普通进程优先级更高的进程，<br>只要是构成这种 低级持锁，高级来抢 的局面都可能死锁。而抢占和中断优先级创造了更多的阶级，<br>也就产生了更多的可能。所以 Linux 中自旋锁的实现第一步是关抢占。<br><br>错误或疏漏的地方还请指正，抱拳了老铁。</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 你好，你学的很认真，学的很通透，总结很到位</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-26 15:48:41</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>惜心（伟祺）</span>
</div><div class=_2_QraFYR_0>这个问题抽象下就是在如何在并行执行中做到串联有序<br>解决思路就两个：<br>1.在结果端（确保内存一致）<br>2.在过程端（确保cpu计算中不被打断）<br>原子性就是确保内存一致，但是因为cpu计算需要时间所以只能保证一个单位的绝对一致<br>至于锁、信号都是在对上面两种思路的组合，妙的是会出现跨代组合来实现更多样化的应用<br>老师从根本上分析问题，由简到繁，一下抓住根本和牛逼<br>其实操作系统就是对简单的功能的组合重复实现无限复杂操作<br>这种思路和软件开发是一致的，用一种语言API，各种的组合重复利用时间空间的重复解决各种复杂问题</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 很好，学到了 </p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-27 14:49:23</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>Freddy</span>
</div><div class=_2_QraFYR_0>本节是关于共享数据的并发修改问题，总结了不同场景下的使用方式：<br>当共享数据是单体变量时，可以尝试使用原子操作指令；<br>当共享数据是复杂的数据结构时：<br>当是单CPU环境时，只有中断和业务进程两个代码操作流，此时我们可以手动控制CPU中断关闭/开启，要注意解决CPU中断关闭/开启的嵌套调用问题；<br>当是多CPU环境时，就不能同时控制多个CPU的中断了，此时我们用到了自旋锁；多个CPU进程竞争自旋锁，成功加锁的进程，可以执行自己的业务流程；这里要注意的是要保证自旋锁流程中的读取锁变量和判断并加锁的操作是原子执行的；<br>在多CPU环境时，没有获取自旋锁的CPU，就会一直在循环读取锁变量和判断是否加锁的流程当中，浪费了CPU资源，为了解决这个问题，引入了信号量；<br>首先，各个进程会去竞争信号量；<br>没有获取信号量的进程放入等待队列，这样该进程所在的CPU就可以去执行其他业务进程了；<br>获取信号量的进程执行完后，会释放信号量后，同时会去唤醒在等待队列中的进程，这样等待的进程就会再次去竞争信号量；<br>思考：<br>1.那一个进程中的多个线程并发修改共享数据的模型，应该也是同样的道理吧？？<br>2.锁，应该是操作的前提条件，有了锁才能去执行业务代码；<br>但对原子操作来说，好像是加锁和业务操作一起执行了。<br></div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 你好，总结到位</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-28 16:50:48</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>lifetime</span>
</div><div class=_2_QraFYR_0>看到楼上的各位都发表了那么多的总结，感觉你们都太厉害了！<br>我也跟着你们的脚步，谈谈我对这节课的理解：<br>1、对原子的理解：<br>抽象理解为一条指令，要么执行完成，要么没有执行<br>2、对中断的理解：<br>单个CPU中多个进程并发执行，是靠使用中断进行切换，关闭中断后，只有一个进程在执行这块临界区代码，其他进程无法切换执行，执行完这块代码后，再打开中断，再去切换到别的进程执行<br>3、对自旋锁的理解：<br>自旋锁解决多个CPU，多个进程并行执行的情况；<br>多个进程对同一个物理内存地址进行访问，先访问并判断为0的进程，进程加锁设置为1，执行临界区代码；<br>其他的进程陷入访问，判断为1的流程中，死循环；<br>执行完临界区的进程将地址设置为0，其他进程再去争抢<br>4、对信号量的理解：<br>信号量解决自旋锁中其他得不到执行的进程一直在轮询的问题，这个一直轮询会导致CPU无法切换到其他不需要执行该临界区的进程执行，效率低下；<br>所以引入能睡眠的机制，得不到的进程不让他们继续等了，先睡觉，负责其他进程执行的CPU去切换到别的进程执行；<br>等执行完临界区的进程OK后，再把这些睡觉的进程唤醒，他们再争抢<br>理解能力有限，只明白这么多，如果有不对的，麻烦指正！</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 对头 </p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-08-18 00:28:34</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>noisyes</span>
</div><div class=_2_QraFYR_0>真的是把锁的前生今世讲得明明白白，让我有种豁然开朗的感觉！可能到最后可能无法独自实现一个操作系统，但是真的能从底层的角度重新认识操作系统！</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>编辑回复: 小编回复，很高兴这个专栏能够帮到你，后面更精彩，敬请期待。还有，只要有兴趣，跟着课程走，是可以跑起来操作系统的，别慌。</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-27 23:42:24</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>黎</span>
</div><div class=_2_QraFYR_0>原子变量，中断，自旋锁，信号量，层层递进，都是在前一个技术的某些场景无法满足的情况下，更高级复杂的解决方案，当然也是基于前面的基础的封装</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 你这角度也很透彻，很好</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-26 09:10:07</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>不一样的烟火</span>
</div><div class=_2_QraFYR_0>锁用来保证资源的使用不被打断，打断的情况包括中断，其他cpu执行流，其他线程<br>保护的情况有原子操作，关中断，自旋锁，信号量<br>原子操作好比瞬时动作，动作只有一个，不被打断<br>关中断好比学习的时候关闭电话，不被分心，专心学习<br>自旋锁好比上厕所的时候锁上门，其他人只能在外面团团转，干着急，其他事儿干不了<br>信号量好比正在忙，门口挂个闲人免进，等自己办完事儿再通知他过来，他可以先去处理其他事情</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 是的 是的 </p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-07-11 23:27:18</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>Feen</span>
</div><div class=_2_QraFYR_0>尝试用自己的理解去消化一下本章的内容，用最少的文字在每句话表达出问题和核心和解决办法，不然显得自己都没好好学习：<br>1、几十年前的一开始，计算机内只有一个CPU，而且执行单道程序，因为当时的整机性能不强，操作方式是一次提交指令等待返回。每次执行任务都发现当前正在运行的程序内部有执行中被打乱的问题，设计程序的时候以为是按照人的思维来运算，实际发现有问题。所以增加了原子操作解决，要不全部执行，要不全部失败。那时候计算机执行任务的时候，程序员都站在计算机（还不能称之为现代电脑）面前，等待结果返回。<br>2、从各种其他设备开始接入计算机开始，为了解决这些设备也要在计算机运行时候的同时解决输入输出问题（这时CPU开始分时切片运行，表象显得可以同时运行多个程序），引入了中断的概念，CPU整个运行时间被分切为每个单位时间，单位时间之间可以持续运行同一程序，也可以打断运行其他程序，现代操作系统也开始初具雏形，区别与老计算机的标志就在于能否中断。<br>3、现代电脑蓬勃发展，电脑开始进入千家万户，中断的大量使用给用户提供了无限的可能，单核CPU的频率随着工艺和材料的提升也在提高，在奔腾时代（P2 P3 P4）你甚至可以在主板BIOS中设置中断。<br>4、万物逃离不了本质，单核CPU频率提升到一定幅度后开始减缓，频率不够，核数来凑。多核CPU进入视野，而中断只能锁定当前占有的那一个CPU核心，无法锁定其他CPU核心不去碰你执行的程序，既然无法通过中断达到锁定，因为你的程序在电脑内只会存在一个程序（如果你一个程序要多开，那通过不同的PID来区分，目前还未讲到，暂且不考虑），聪明的程序员又想到了锁你的程序变量，自旋锁开始使用(xchg)。<br>5、自旋锁的使用几乎是同时出现信号量，在使用自旋锁的时候确实排他了，但是CPU的工作却发生了变化，不止要执行当前用户程序中正在运行的那一部分代码，还得运行另一部分未执行的代码。同时还有长时间等待的问题。因为它旋转着呢，就如同排队上厕所一样，肯定得敲CPU的大门，问下前面那位占着茅坑的好了没，上不到厕所决不罢休。还好电脑不像人，没有三急来了就骂人的情绪，所以聪明的程序员又干了一件事：发筹子（count），好了叫你，没好的时候躺平。（从这里看出程序的主导权或者执行权，已经由代码本身，移交到外部信号量控制部分。）<br>6、总结：计算机经过这么多年的发展，从思路上可以看出 ，解决问题的方法就是先从单个示例下手，不管是原子操作，还是中断，还是自旋锁，还是信号量。当你解决了单个实例的问题，那就是从0到1质变，从1到99都是在此基础上的衍生，而从单个实例下手的入口点可以有多个，但从局部性原理开始考虑更轻松一点。</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 嗯 嗯 对的</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-06-16 09:41:52</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>Return12321</span>
</div><div class=_2_QraFYR_0>信号量理解，比如有微信、QQ、钉钉应用需要获取到键盘输入值：<br>1、初始化sem_count=1，sem_waitlst等待链为空；<br>2、通过键盘输入字符到缓冲区，并通过进程调度通知进程；<br>3、三个进程开始竞争，微信抢到，先给sem_lock加锁，此时QQ、钉钉的进程不能读取信号量，循环判断(自旋锁的逻辑)；<br>4、微信进程对sem_count执行判断sem_count不小于1(sem_count=1)，获取信号量成功，执行sem_count“减1”操作(sem_count=0)，释放自旋锁sem_lock；<br>5-1、QQ、钉钉进程此时能读取sem_lock自旋锁，此时钉钉抢到，则先给sem_lock加锁，获取sem_count值并执行判断sem_count不小于1，此时sem_count=0（小于1），钉钉进程进入等待状态，并将其挂入sem_waitlst中，释放自旋锁sem_lock。最后QQ进程重复5-1步骤，sem_count=0，sem_waitlst=[QQ, 钉钉]；<br>5-2、微信进程执行读取缓存区代码流操作；<br>6、微信代码流执行(读取键盘值)完成，先给sem_lock加锁，对sem_count执行“加1”操作(sem_count=1)，检查sem_count不小于1，则执行唤醒sem_waitlst 中进程的操作，标记信号量释放成功，给sem_lock解锁；<br>7、sem_waitlst=[QQ, 钉钉]中的进程重复从4开始的步骤。<br><br>文章中写的是先执行“减1”操作、然后sem_count和0判断，但从代码上来看，sem_count是先和1比较，然后执行“减1”操作。</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 是的</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-11-01 16:49:32</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>K菌无惨</span>
</div><div class=_2_QraFYR_0>感觉信号量好就好在与操作系统的进程/线程调度整合在一起，所以就能够在没有资源时（即信号量等于0），触发进程调度，避免了自旋锁的CPU空转，在拥有资源时能够唤起对应的代码执行下去（即goto start_step）；而至于为什么要用到自旋锁，而不用普通的锁，估计只是因为自旋锁在临界区较短的时候效率更高。 不知道对不对</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 对的 </p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-06-13 21:22:30</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>李yong</span>
</div><div class=_2_QraFYR_0>之前没有学习过操作系统，看了两遍，总结一下自己的理解,。<br>1. 原子操作，可以解决单个变量并发问题。不管后续多核cpu还是单核cpu. <br>缺点在于只对于单个变量有效。<br>实现方式，汇编lock.<br>汇编lock这种方式后续几种方法都会涉及到。<br>2. 中断。单核cpu时只有一个流，唯一可能的并发就是中断，关闭中断即可解决问题。<br>缺点，只对于单核cpu有效。<br>实现方式，关闭中断。<br>不管单核还是多核，都会存在中断引起并发的情况，所以后面两种方法都涉及关闭中断。<br>3.自旋锁。可以突破原子操作和中断的限制，即支持多个变量并发以及多核cpu. 额外增加锁变量，锁变量值为0还是1指使此时是否存在并发。存在并发时，循环判断此锁变量的值，直到其他并发结束。不存在并发时，对锁变量加锁。需要关闭中断避免中断的影响。<br>缺点，存在并发时，其他流一直试图获取锁变量，占用cpu资源。<br>实现方式，增加锁变量，指使是否存在并发。<br>4. 信号量。增加结构体，结构体中包含count信号量计数值和list用于挂载等待任务流列表。count为0，任务流进入休眠状态(释放出cpu, 可以调度其他任务流)。count为1.获取信号量，可执行后续操作，并将count置为0，表示已占用，执行完成后，将count加1，</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 对的 你很牛</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-08-11 09:03:10</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>Geek_0c1f07</span>
</div><div class=_2_QraFYR_0>中断嵌套问题那里，我想不明白：【开启中断函数】那里到底是怎么才能打开中断的？<br>比如嵌套场景如下：<br>场景：{关闭中断函数，(关闭中断函数，操作数据，开启中断函数)，操作数据，开启中断函数}。<br>根据代码，只有在关闭中断函数中，能改变内存中的eflags寄存器的标志。而开启中断函数中永远是使用内存中的eflags寄存器的，没有改变内存中的寄存器。那么在此场景中，根据第二个关闭中断函数，内存保存的已经是关闭中断的eflags寄存器，那么开启中断函数每次从内存中读的都是关闭中断的eflags寄存器。所以很矛盾，【开启中断函数】到底是怎么打开中断的？<br>望老师解答我的迷惑！</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 因为开启中断有两个方法一个是sti指令，一个是操作eflags寄存器</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-08-22 16:36:41</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>青玉白露</span>
</div><div class=_2_QraFYR_0>return (*(volatile u32_t*)&(v)->a_count);<br><br>这里为什么非要这么复杂？<br>return v->a_count;<br>难道有问题嘛？还得要先取地址再取值</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 防止 编译器优化</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-07-09 10:00:00</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>吴国豪</span>
</div><div class=_2_QraFYR_0>单核cpu，切换进程必须通过中断，因此可以通过关中断来执行一些同步操作。<br>多核cpu，同步的数据可能会收到别的核心上的进程影响，因此不能仅仅通过关闭当前核心的中断来执行同步操作。因此通过自旋锁。自旋锁要么被获得，要么就一直循环的申请，直到被获得。<br>前面的同步操作，都要求锁的使用时间短，否则就会存在多个经常一直在等待某个进程，造成资源的浪费。信号量通过挂起的操作，让获取锁失败的进程，不再进行循环申请的操作，不再占用cpu资源。直到释放锁的进程，在释放的时候，才将挂起的进程释放，让他们进入竞争锁的状态。<br></div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 是的 是的 </p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-07-04 17:17:10</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>哇咔咔</span>
</div><div class=_2_QraFYR_0>“x86 CPU 给我们提供了一个原子交换指令，xchg，它可以让寄存器里的一个值跟内存空间中的一个值做交换”<br>这里说xchg是原子的，那么为什么在xchg前面还要lock呢？</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 当我们用多核cpu时，问题就不同了 </p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-06-06 11:17:12</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>舞铲阶级</span>
</div><div class=_2_QraFYR_0>一开始，从单个变量可能由于中断，而产生达不到预期结果的情况，可以通过硬件层面的原子操作，来解决相应问题；但硬件层面的的原子操作没办法适应多种多样的数据结构，这个时候就需要对中断来进行处理，保证数据处理过程中的“原子性”，对于嵌套中断的问题采用栈来保存对应的标志寄存器内容，用于还原来解决嵌套问题；但多核CPU可以绕过单个CPU的中断从而影响数据处理的“原子性”（个人理解希望老师指点），这时候通过硬件提供一个变量来形成自旋锁，保证处理的“原子性”，但是仍会由于嵌套中断从而导致占有自旋锁后进入死循环，因此引入关中断自旋锁来保证“原子性”；最后以上三种情况都不支持长时间等待情况，因此引入了信号量，注意对信号量的操作时要使用自旋锁来保证其“原子性”，如有不对希望大家指正。</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 你好，正确的</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-26 22:33:54</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>Fan</span>
</div><div class=_2_QraFYR_0>好</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>编辑回复: 谢谢啦！欢迎分享你的收获，对梳理自己的思路有帮助，同时也能帮到其他人。</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-05-26 00:48:35</div></div></div></div></li><li>
<div class=_2sjJGcOH_0>
<div class=_36ChpWj4_0>
<div class=_2zFoi7sd_0><span>tuyu</span>
</div><div class=_2_QraFYR_0>看了好多遍. 终于有点看懂了, 我总结一下我的笔记<br><br>锁是为了解决多并发安全处理一个数据<br><br>1. 当这个数据比较简单或者处理的数据比较简单时, 如果保证只有原子操作, 就能够很好的解决这个问题<br><br>2. 当这个数据比较复杂, 比如一个数据结构, 可以同时修改数据结构中不同的属性的时候, 就需要中断来解决这个问题, 但是单CPU的中断有个问题就是嵌套会出现bug, 于是把eflag的F位值+栈+内存巧妙的解决了这个问题<br><br>3. 随着计算机的发展, 大家开始有多CPU了, Eflag的F是不能解决这个问题, 这个时候科学家用了一个自旋锁, 自旋锁的实现也很巧妙, 操作系统提供一个函数, 保证程序读取锁, 上锁, 开锁都可以是原子性的, 感觉这个是大家使用分布式锁的原型<br><br>4. 现在多个CPU, 但是不能只执行你一个多并发程序, 其他的进程可能会占用你的CPU, 所以有信令这个数据结构, 其中count=1可以抢占, 用悲观锁的思想, 抢占这个信令先锁住这个信令, 然后count-1, 然后执行doSomethins, 然后如果有新的程序来占取, 如果count &lt; 1, 则到队列中排队, 等处理完了，唤醒队列中的人物, 就count+=1, 然后释放sem的锁</div><div class=_10o3OAxT_0>
<p class=_3KxQPN3V_0>作者回复: 66666</p></div><div class=_3klNVc4Z_0>
<div class=_3Hkula0k_0>2021-11-17 10:50:09</div></div></div></div></li></ul><footer class=footline>
</footer></div></div><div id=navigation>
<a class="nav nav-prev" href=/9/7/ title=07_Cache与内存：程序放在哪儿？> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/9/9/ title=09_瞧一瞧Linux：Linux的自旋锁和信号量如何实现？ style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1646809632></script>
<script src=/js/perfect-scrollbar.min.js?1646809632></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1646809632></script>
<script src=/js/jquery.sticky.js?1646809632></script>
<script src=/js/featherlight.min.js?1646809632></script>
<script src=/js/highlight.pack.js?1646809632></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/js/modernizr.custom-3.6.0.js?1646809632></script>
<script src=/js/learn.js?1646809632></script>
<script src=/js/hugo-learn.js?1646809632></script>
<script src=/mermaid/mermaid.js?1646809632></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
</body></html>